// Generated by CoffeeScript 2.7.0
var NAME_LEN, NBSP, div, toSortKey;

import {
  tag
} from './fasthtml.js';

div = tag("div");

NAME_LEN = 21;

NBSP = "\u00A0";

toSortKey = function(name) { // name
  var out;
  name = name.textContent;
  out = name != null ? name : "";
  if (out.length > NAME_LEN) {
    out = out.slice(0, NAME_LEN);
  }
  return out.trim().toLocaleLowerCase('sv-SE');
};

export var Select = class Select {
  constructor({items = [], onCountChange = null} = {}) {
    var j, len, name;
    this.onKeydown = this.onKeydown.bind(this);
    this.onCountChange = onCountChange;
    this.selectedIndex = -1;
    this.element = div({
      tabindex: "0",
      style: "font-family:monospace; font-size:14px; width:360px; height:360px; overflow-y:auto; border:1px solid #999; white-space:pre;"
    });
    this.element.addEventListener('keydown', this.onKeydown);
    this.element.addEventListener('focus', () => {
      return this.paintSelection();
    });
    this.element.addEventListener('blur', () => {
      return this.paintSelection();
    });
    for (j = 0, len = items.length; j < len; j++) {
      name = items[j];
      this.add(div(name));
    }
    this.setSelectedIndex(0);
    this.notifyCount();
  }

  notifyCount() {
    return typeof this.onCountChange === "function" ? this.onCountChange(this.element.children.length) : void 0;
  }

  setSelectedIndex(i) {
    var count, next, row;
    count = this.element.children.length;
    if (count === 0) {
      this.selectedIndex = -1;
      return;
    }
    if (!Number.isFinite(i)) {
      i = 0;
    }
    next = Math.max(0, Math.min(i, count - 1));
    this.selectedIndex = next;
    this.paintSelection();
    row = this.element.children[this.selectedIndex];
    return row.scrollIntoView({
      block: "nearest"
    });
  }

  paintSelection() {
    var j, len, ref, row;
    ref = this.element.children;
    for (j = 0, len = ref.length; j < len; j++) {
      row = ref[j];
      row.style.background = "";
    }
    if (this.selectedIndex < 0) {
      return;
    }
    row = this.element.children[this.selectedIndex];
    if (row == null) {
      return;
    }
    if (document.activeElement === this.element) {
      return row.style.background = "#cfe8ff";
    } else {
      return row.style.background = "#e8e8e8";
    }
  }

  sort(preferredRow = null) {
    var i, j, len, row, rows;
    rows = Array.prototype.slice.call(this.element.children);
    rows.sort(function(a, b) {
      return a.dataset.sortKey.localeCompare(b.dataset.sortKey, 'sv', {
        sensitivity: 'base'
      });
    });
    for (j = 0, len = rows.length; j < len; j++) {
      row = rows[j];
      this.element.appendChild(row);
    }
    if (rows.length === 0) {
      this.selectedIndex = -1;
      this.notifyCount();
      return;
    }
    if (preferredRow != null) {
      i = rows.indexOf(preferredRow);
      if (i < 0) {
        i = 0;
      }
      this.setSelectedIndex(i);
    } else {
      this.setSelectedIndex(Math.max(0, Math.min(this.selectedIndex, rows.length - 1)));
    }
    return this.notifyCount();
  }

  selectByInitial(char, backwards = false) {
    var i, j, k, l, len, len1, len2, matches, needle, ref, revMatches, row, rows, target;
    rows = Array.prototype.slice.call(this.element.children);
    if (rows.length === 0) {
      return;
    }
    needle = char.toLocaleLowerCase('sv-SE');
    matches = [];
    for (i = j = 0, len = rows.length; j < len; i = ++j) {
      row = rows[i];
      if ((ref = row.dataset.sortKey) != null ? ref.startsWith(needle) : void 0) {
        matches.push(i);
      }
    }
    if (matches.length === 0) {
      return;
    }
    if (backwards) {
      revMatches = matches.slice().reverse();
      target = revMatches[0];
      for (k = 0, len1 = revMatches.length; k < len1; k++) {
        i = revMatches[k];
        if (!(i < this.selectedIndex)) {
          continue;
        }
        target = i;
        break;
      }
    } else {
      target = matches[0];
      for (l = 0, len2 = matches.length; l < len2; l++) {
        i = matches[l];
        if (!(i > this.selectedIndex)) {
          continue;
        }
        target = i;
        break;
      }
    }
    return this.setSelectedIndex(target);
  }

  add(name, pick = false) {
    var row;
    row = div({
      style: "line-height:18px; padding:0 4px; cursor:default;",
      dataset: {
        sortKey: toSortKey(name)
      }
    }, name);
    row.addEventListener("click", () => {
      var i;
      i = Array.prototype.indexOf.call(this.element.children, row);
      if (i >= 0) {
        this.setSelectedIndex(i);
        return this.element.focus();
      }
    });
    this.element.appendChild(row);
    return this.sort(pick ? row : null);
  }

  removeSelected() {
    var count, i;
    count = this.element.children.length;
    if (count === 0) {
      return;
    }
    i = this.selectedIndex >= 0 ? this.selectedIndex : count - 1;
    this.element.removeChild(this.element.children[i]);
    if (this.element.children.length === 0) {
      this.selectedIndex = -1;
      this.notifyCount();
      return;
    }
    this.setSelectedIndex(Math.min(i, this.element.children.length - 1));
    return this.notifyCount();
  }

  clear() {
    this.element.innerHTML = '';
    this.selectedIndex = -1;
    return this.notifyCount();
  }

  focus() {
    return this.element.focus();
  }

  onKeydown(e) {
    if (e.key === 'ArrowUp') {
      e.preventDefault();
      return this.setSelectedIndex(this.selectedIndex - 1);
    } else if (e.key === 'ArrowDown') {
      e.preventDefault();
      return this.setSelectedIndex(this.selectedIndex + 1);
    } else if (e.key.length === 1 && !e.ctrlKey && !e.metaKey && !e.altKey) {
      e.preventDefault();
      return this.selectByInitial(e.key, e.shiftKey);
    }
  }

};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VsZWN0LmpzIiwic291cmNlUm9vdCI6IlxcIiwic291cmNlcyI6WyJzZWxlY3QuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxJQUFBLFFBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxFQUFBOztBQUFBLE9BQUE7RUFBUSxHQUFSO0NBQUEsTUFBQTs7QUFFQSxHQUFBLEdBQU0sR0FBQSxDQUFJLEtBQUo7O0FBRU4sUUFBQSxHQUFXOztBQUNYLElBQUEsR0FBTzs7QUFFUCxTQUFBLEdBQVksUUFBQSxDQUFDLElBQUQsQ0FBQSxFQUFBO0FBQ1osTUFBQTtFQUFDLElBQUEsR0FBTyxJQUFJLENBQUM7RUFDWixHQUFBLGtCQUFNLE9BQU87RUFDYixJQUFHLEdBQUcsQ0FBQyxNQUFKLEdBQWEsUUFBaEI7SUFBOEIsR0FBQSxHQUFNLEdBQUcsQ0FBQyxLQUFKLENBQVUsQ0FBVixFQUFhLFFBQWIsRUFBcEM7O1NBQ0EsR0FBRyxDQUFDLElBQUosQ0FBQSxDQUFVLENBQUMsaUJBQVgsQ0FBNkIsT0FBN0I7QUFKVzs7QUFNWixPQUFBLElBQWEsU0FBTixNQUFBLE9BQUE7RUFDTixXQUFhLENBQUMsQ0FBQyxLQUFBLEdBQVEsRUFBVCxFQUFhLGFBQUEsR0FBZ0IsSUFBN0IsSUFBcUMsQ0FBQSxDQUF0QyxDQUFBO0FBQ2QsUUFBQSxDQUFBLEVBQUEsR0FBQSxFQUFBO1FBNkhDLENBQUEsZ0JBQUEsQ0FBQTtJQTdIQyxJQUFDLENBQUEsYUFBRCxHQUFpQjtJQUNqQixJQUFDLENBQUEsYUFBRCxHQUFpQixDQUFDO0lBQ2xCLElBQUMsQ0FBQSxPQUFELEdBQVcsR0FBQSxDQUNWO01BQUEsUUFBQSxFQUFVLEdBQVY7TUFDQSxLQUFBLEVBQU87SUFEUCxDQURVO0lBSVgsSUFBQyxDQUFBLE9BQU8sQ0FBQyxnQkFBVCxDQUEwQixTQUExQixFQUFxQyxJQUFDLENBQUEsU0FBdEM7SUFDQSxJQUFDLENBQUEsT0FBTyxDQUFDLGdCQUFULENBQTBCLE9BQTFCLEVBQW1D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QUZJO0tBQUEsTUFHQSxJQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTixLQUFnQixDQUFoQixJQUFzQixDQUFJLENBQUMsQ0FBQyxPQUE1QixJQUF3QyxDQUFJLENBQUMsQ0FBQyxPQUE5QyxJQUEwRCxDQUFJLENBQUMsQ0FBQyxNQUFuRTtNQUNKLENBQUMsQ0FBQyxjQUFGLENBQUE7YUFDQSxJQUFDLENBQUEsZUFBRCxDQUFpQixDQUFDLENBQUMsR0FBbkIsRUFBd0IsQ0FBQyxDQUFDLFFBQTFCLEVBRkk7O0VBUEs7O0FBL0hMIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHt0YWd9IGZyb20gJy4vZmFzdGh0bWwuanMnXHJcblxyXG5kaXYgPSB0YWcgXCJkaXZcIlxyXG5cclxuTkFNRV9MRU4gPSAyMVxyXG5OQlNQID0gXCJcXHUwMEEwXCJcclxuXHJcbnRvU29ydEtleSA9IChuYW1lKSAtPiAjIG5hbWVcclxuXHRuYW1lID0gbmFtZS50ZXh0Q29udGVudFxyXG5cdG91dCA9IG5hbWUgPyBcIlwiXHJcblx0aWYgb3V0Lmxlbmd0aCA+IE5BTUVfTEVOIHRoZW4gb3V0ID0gb3V0LnNsaWNlIDAsIE5BTUVfTEVOXHJcblx0b3V0LnRyaW0oKS50b0xvY2FsZUxvd2VyQ2FzZSAnc3YtU0UnXHJcblxyXG5leHBvcnQgY2xhc3MgU2VsZWN0XHJcblx0Y29uc3RydWN0b3I6ICh7aXRlbXMgPSBbXSwgb25Db3VudENoYW5nZSA9IG51bGx9ID0ge30pIC0+XHJcblx0XHRAb25Db3VudENoYW5nZSA9IG9uQ291bnRDaGFuZ2VcclxuXHRcdEBzZWxlY3RlZEluZGV4ID0gLTFcclxuXHRcdEBlbGVtZW50ID0gZGl2XHJcblx0XHRcdHRhYmluZGV4OiBcIjBcIlxyXG5cdFx0XHRzdHlsZTogXCJmb250LWZhbWlseTptb25vc3BhY2U7IGZvbnQtc2l6ZToxNHB4OyB3aWR0aDozNjBweDsgaGVpZ2h0OjM2MHB4OyBvdmVyZmxvdy15OmF1dG87IGJvcmRlcjoxcHggc29saWQgIzk5OTsgd2hpdGUtc3BhY2U6cHJlO1wiXHJcblxyXG5cdFx0QGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAna2V5ZG93bicsIEBvbktleWRvd25cclxuXHRcdEBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIgJ2ZvY3VzJywgPT4gQHBhaW50U2VsZWN0aW9uKClcclxuXHRcdEBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIgJ2JsdXInLCA9PiBAcGFpbnRTZWxlY3Rpb24oKVxyXG5cclxuXHRcdGZvciBuYW1lIGluIGl0ZW1zXHJcblx0XHRcdEBhZGQgZGl2IG5hbWVcclxuXHRcdEBzZXRTZWxlY3RlZEluZGV4IDBcclxuXHRcdEBub3RpZnlDb3VudCgpXHJcblxyXG5cdG5vdGlmeUNvdW50OiAtPlxyXG5cdFx0QG9uQ291bnRDaGFuZ2U/IEBlbGVtZW50LmNoaWxkcmVuLmxlbmd0aFxyXG5cclxuXHRzZXRTZWxlY3RlZEluZGV4OiAoaSkgLT5cclxuXHRcdGNvdW50ID0gQGVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoXHJcblx0XHRpZiBjb3VudCA9PSAwXHJcblx0XHRcdEBzZWxlY3RlZEluZGV4ID0gLTFcclxuXHRcdFx0cmV0dXJuXHJcblxyXG5cdFx0aWYgbm90IE51bWJlci5pc0Zpbml0ZShpKSB0aGVuIGkgPSAwXHJcblx0XHRuZXh0ID0gTWF0aC5tYXggMCwgTWF0aC5taW4gaSwgY291bnQgLSAxXHJcblx0XHRAc2VsZWN0ZWRJbmRleCA9IG5leHRcclxuXHRcdEBwYWludFNlbGVjdGlvbigpXHJcblx0XHRyb3cgPSBAZWxlbWVudC5jaGlsZHJlbltAc2VsZWN0ZWRJbmRleF1cclxuXHRcdHJvdy5zY3JvbGxJbnRvVmlldyBibG9jazogXCJuZWFyZXN0XCJcclxuXHJcblx0cGFpbnRTZWxlY3Rpb246IC0+XHJcblx0XHRmb3Igcm93IGluIEBlbGVtZW50LmNoaWxkcmVuXHJcblx0XHRcdHJvdy5zdHlsZS5iYWNrZ3JvdW5kID0gXCJcIlxyXG5cdFx0cmV0dXJuIGlmIEBzZWxlY3RlZEluZGV4IDwgMFxyXG5cdFx0cm93ID0gQGVsZW1lbnQuY2hpbGRyZW5bQHNlbGVjdGVkSW5kZXhdXHJcblx0XHRyZXR1cm4gdW5sZXNzIHJvdz9cclxuXHRcdGlmIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgaXMgQGVsZW1lbnRcclxuXHRcdFx0cm93LnN0eWxlLmJhY2tncm91bmQgPSBcIiNjZmU4ZmZcIlxyXG5cdFx0ZWxzZVxyXG5cdFx0XHRyb3cuc3R5bGUuYmFja2dyb3VuZCA9IFwiI2U4ZThlOFwiXHJcblxyXG5cdHNvcnQ6IChwcmVmZXJyZWRSb3cgPSBudWxsKSAtPlxyXG5cdFx0cm93cyA9IEFycmF5OjpzbGljZS5jYWxsIEBlbGVtZW50LmNoaWxkcmVuXHJcblx0XHRyb3dzLnNvcnQgKGEsIGIpIC0+IGEuZGF0YXNldC5zb3J0S2V5LmxvY2FsZUNvbXBhcmUgYi5kYXRhc2V0LnNvcnRLZXksICdzdicsIHNlbnNpdGl2aXR5OidiYXNlJ1xyXG5cdFx0Zm9yIHJvdyBpbiByb3dzXHJcblx0XHRcdEBlbGVtZW50LmFwcGVuZENoaWxkIHJvd1xyXG5cclxuXHRcdGlmIHJvd3MubGVuZ3RoID09IDBcclxuXHRcdFx0QHNlbGVjdGVkSW5kZXggPSAtMVxyXG5cdFx0XHRAbm90aWZ5Q291bnQoKVxyXG5cdFx0XHRyZXR1cm5cclxuXHJcblx0XHRpZiBwcmVmZXJyZWRSb3c/XHJcblx0XHRcdGkgPSByb3dzLmluZGV4T2YgcHJlZmVycmVkUm93XHJcblx0XHRcdGlmIGkgPCAwIHRoZW4gaSA9IDBcclxuXHRcdFx0QHNldFNlbGVjdGVkSW5kZXggaVxyXG5cdFx0ZWxzZVxyXG5cdFx0XHRAc2V0U2VsZWN0ZWRJbmRleCBNYXRoLm1heCAwLCBNYXRoLm1pbiBAc2VsZWN0ZWRJbmRleCwgcm93cy5sZW5ndGggLSAxXHJcblxyXG5cdFx0QG5vdGlmeUNvdW50KClcclxuXHJcblx0c2VsZWN0QnlJbml0aWFsOiAoY2hhciwgYmFja3dhcmRzID0gZmFsc2UpIC0+XHJcblx0XHRyb3dzID0gQXJyYXk6OnNsaWNlLmNhbGwgQGVsZW1lbnQuY2hpbGRyZW5cclxuXHRcdGlmIHJvd3MubGVuZ3RoID09IDAgdGhlbiByZXR1cm5cclxuXHJcblx0XHRuZWVkbGUgPSBjaGFyLnRvTG9jYWxlTG93ZXJDYXNlICdzdi1TRSdcclxuXHRcdG1hdGNoZXMgPSBbXVxyXG5cdFx0Zm9yIHJvdywgaSBpbiByb3dzIHdoZW4gcm93LmRhdGFzZXQuc29ydEtleT8uc3RhcnRzV2l0aCBuZWVkbGVcclxuXHRcdFx0bWF0Y2hlcy5wdXNoIGlcclxuXHJcblx0XHRpZiBtYXRjaGVzLmxlbmd0aCA9PSAwIHRoZW4gcmV0dXJuXHJcblxyXG5cdFx0aWYgYmFja3dhcmRzXHJcblx0XHRcdHJldk1hdGNoZXMgPSBtYXRjaGVzLnNsaWNlKCkucmV2ZXJzZSgpXHJcblx0XHRcdHRhcmdldCA9IHJldk1hdGNoZXNbMF1cclxuXHRcdFx0Zm9yIGkgaW4gcmV2TWF0Y2hlcyB3aGVuIGkgPCBAc2VsZWN0ZWRJbmRleFxyXG5cdFx0XHRcdHRhcmdldCA9IGlcclxuXHRcdFx0XHRicmVha1xyXG5cdFx0ZWxzZVxyXG5cdFx0XHR0YXJnZXQgPSBtYXRjaGVzWzBdXHJcblx0XHRcdGZvciBpIGluIG1hdGNoZXMgd2hlbiBpID4gQHNlbGVjdGVkSW5kZXhcclxuXHRcdFx0XHR0YXJnZXQgPSBpXHJcblx0XHRcdFx0YnJlYWtcclxuXHJcblx0XHRAc2V0U2VsZWN0ZWRJbmRleCB0YXJnZXRcclxuXHJcblx0YWRkOiAobmFtZSwgcGljayA9IGZhbHNlKSAtPlxyXG5cdFx0cm93ID0gZGl2XHJcblx0XHRcdHN0eWxlOiBcImxpbmUtaGVpZ2h0OjE4cHg7IHBhZGRpbmc6MCA0cHg7IGN1cnNvcjpkZWZhdWx0O1wiXHJcblx0XHRcdGRhdGFzZXQ6IHNvcnRLZXk6IHRvU29ydEtleShuYW1lKVxyXG5cdFx0XHRuYW1lXHJcblxyXG5cdFx0cm93LmFkZEV2ZW50TGlzdGVuZXIgXCJjbGlja1wiLCA9PlxyXG5cdFx0XHRpID0gQXJyYXk6OmluZGV4T2YuY2FsbCBAZWxlbWVudC5jaGlsZHJlbiwgcm93XHJcblx0XHRcdGlmIGkgPj0gMFxyXG5cdFx0XHRcdEBzZXRTZWxlY3RlZEluZGV4IGlcclxuXHRcdFx0XHRAZWxlbWVudC5mb2N1cygpXHJcblxyXG5cdFx0QGVsZW1lbnQuYXBwZW5kQ2hpbGQgcm93XHJcblx0XHRAc29ydCBpZiBwaWNrIHRoZW4gcm93IGVsc2UgbnVsbFxyXG5cclxuXHRyZW1vdmVTZWxlY3RlZDogLT5cclxuXHRcdGNvdW50ID0gQGVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoXHJcblx0XHRpZiBjb3VudCA9PSAwIHRoZW4gcmV0dXJuXHJcblxyXG5cdFx0aSA9IGlmIEBzZWxlY3RlZEluZGV4ID49IDAgdGhlbiBAc2VsZWN0ZWRJbmRleCBlbHNlIGNvdW50IC0gMVxyXG5cdFx0QGVsZW1lbnQucmVtb3ZlQ2hpbGQgQGVsZW1lbnQuY2hpbGRyZW5baV1cclxuXHJcblx0XHRpZiBAZWxlbWVudC5jaGlsZHJlbi5sZW5ndGggPT0gMFxyXG5cdFx0XHRAc2VsZWN0ZWRJbmRleCA9IC0xXHJcblx0XHRcdEBub3RpZnlDb3VudCgpXHJcblx0XHRcdHJldHVyblxyXG5cclxuXHRcdEBzZXRTZWxlY3RlZEluZGV4IE1hdGgubWluIGksIEBlbGVtZW50LmNoaWxkcmVuLmxlbmd0aCAtIDFcclxuXHRcdEBub3RpZnlDb3VudCgpXHJcblxyXG5cdGNsZWFyOiAtPlxyXG5cdFx0QGVsZW1lbnQuaW5uZXJIVE1MID0gJydcclxuXHRcdEBzZWxlY3RlZEluZGV4ID0gLTFcclxuXHRcdEBub3RpZnlDb3VudCgpXHJcblxyXG5cdGZvY3VzOiAtPlxyXG5cdFx0QGVsZW1lbnQuZm9jdXMoKVxyXG5cclxuXHRvbktleWRvd246IChlKSA9PlxyXG5cdFx0aWYgZS5rZXkgPT0gJ0Fycm93VXAnXHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKVxyXG5cdFx0XHRAc2V0U2VsZWN0ZWRJbmRleCBAc2VsZWN0ZWRJbmRleCAtIDFcclxuXHRcdGVsc2UgaWYgZS5rZXkgPT0gJ0Fycm93RG93bidcclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpXHJcblx0XHRcdEBzZXRTZWxlY3RlZEluZGV4IEBzZWxlY3RlZEluZGV4ICsgMVxyXG5cdFx0ZWxzZSBpZiBlLmtleS5sZW5ndGggPT0gMSBhbmQgbm90IGUuY3RybEtleSBhbmQgbm90IGUubWV0YUtleSBhbmQgbm90IGUuYWx0S2V5XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKVxyXG5cdFx0XHRAc2VsZWN0QnlJbml0aWFsIGUua2V5LCBlLnNoaWZ0S2V5XHJcbiJdfQ==
//# sourceURL=c:\github\2025\035-FairPair\select.coffee