// Generated by CoffeeScript 2.7.0
var a, echo, fetch, formatPGN, getHeader, parsePGN, pretty, removeEval, removeParenthesis, span, splitMoves, strong, tabell, table, td, th, tr,
  indexOf = [].indexOf;

echo = console.log;

span = function(s, attrs = "") {
  return `<span ${attrs}>${s}</span>`;
};

table = function(s, attrs = "") {
  return `<table ${attrs}>\n${s}</table>`;
};

tr = function(s, attrs = "") {
  return `<tr ${attrs}>${s}</tr>\n`;
};

td = function(s, attrs = "") {
  return `<td ${attrs}>${s}</td>`;
};

th = function(s, attrs = "") {
  return `<th ${attrs}>${s}</th>`;
};

a = function(s, attrs = "") {
  return `<a ${attrs}>${s}</a>`;
};

strong = function(s) {
  return `<strong>${s}</strong>`;
};

formatPGN = function() {
  var ctrlA, ctrlB, ctrlC, input;
  ctrlA = document.getElementById("pgn-input");
  ctrlB = document.getElementById("knapp");
  ctrlC = document.getElementById("output");
  ctrlA.hidden = true;
  ctrlB.hidden = true;
  input = ctrlA.value;
  return ctrlC.innerHTML = parsePGN(input);
};

pretty = function(raw) {
  var arr, move;
  if (indexOf.call(raw, "{") < 0) {
    return [raw.trim(), '', ''];
  }
  arr = raw.split(' ');
  move = arr[0];
  if ("Inaccuracy." === arr[3]) {
    return [move, ' • ', arr[4]];
  }
  if ("Mistake." === arr[3]) {
    return [move, ' •• ', arr[4]];
  }
  if ("Blunder." === arr[3]) {
    return [move, ' ••• ', arr[4]];
  }
  if ("Checkmate" === arr[3]) {
    return [move, ' ••• ', arr[7]];
  }
  if ("checkmate" === arr[5]) {
    return [move, ' ••• ', arr[7]];
  }
  return [move, '', ''];
};

// echo ["d5",""], pretty "d5  "
// pretty "Bh5  { Inaccuracy. Bxf3 was best. }  " => ["Bh5","• (Bxf3)"]
fetch = function(pgn, move, offset, start, stopp) {
  var p, q, result;
  a = offset + move.toString().length;
  p = pgn.indexOf(start);
  q = pgn.indexOf(stopp);
  if (p === -1) {
    return ['', '', ''];
  }
  if (q === -1) {
    q = pgn.length;
  }
  result = pretty(pgn.substring(p + a, q));
  echo(result);
  return result;
};

splitMoves = function(pgn) {
  var arr, b, move, w;
  arr = [];
  move = 1;
  while (true) {
    w = fetch(pgn, move, 2, move + '.', move + '...');
    if (w.join('').length === 0) {
      break;
    }
    arr.push(w);
    b = fetch(pgn, move, 4, move + '...', (move + 1) + '.');
    if (b.join('').length === 0) {
      break;
    }
    arr.push(b);
    move++;
  }
  return arr;
};

removeParenthesis = function(pgn) {
  var ch, j, len, level, result;
  result = "";
  level = 0;
  for (j = 0, len = pgn.length; j < len; j++) {
    ch = pgn[j];
    if (ch === '(') {
      level++;
    } else if (ch === ')') {
      level--;
    } else if (level === 0) {
      result += ch;
    }
  }
  return result;
};

removeEval = function(pgn) {
  var ch, j, len, level, result;
  result = "";
  level = 0;
  for (j = 0, len = pgn.length; j < len; j++) {
    ch = pgn[j];
    if (ch === '[') {
      level = level + 1;
    } else if (ch === ']') {
      level = level - 1;
    } else if (level === 0) {
      result += ch;
    }
  }
  return result;
};

tabell = function(arr, start, stopp) {
  var b, c, d, e, f, i, index, j, n, ref, ref1, s, t;
  s = "";
  n = arr.length; // antal ply
  echo(n, start, stopp);
  if (start >= n) {
    return '';
  }
  for (i = j = ref = start / 2, ref1 = stopp / 2; (ref <= ref1 ? j < ref1 : j > ref1); i = ref <= ref1 ? ++j : --j) {
    index = 2 * i;
    [c, b, a] = index < n ? arr[index] : ['', '', ''];
    [d, e, f] = index + 1 < n ? arr[index + 1] : ['', '', ''];
    t = tr(td(a) + td(b) + td(c) + td(strong(1 + i)) + td(d) + td(e) + td(f));
    echo(i, t);
    s += t;
  }
  return table(s, 'class="inner-table"');
};

getHeader = function(pgn) {
  var arr, attrs, i, j, line, name, p, ref, result, site, value;
  arr = pgn.split('\n');
  attrs = {};
  result = "";
  attrs.Event = "";
  attrs.Date = "";
  attrs.Site = "";
  attrs.TimeControl = "";
  attrs.FEN = "";
  attrs.WhiteElo = "";
  attrs.White = "";
  attrs.BlackElo = "";
  attrs.Black = "";
  attrs.Result = "";
  for (i = j = 0, ref = arr.length; (0 <= ref ? j < ref : j > ref); i = 0 <= ref ? ++j : --j) {
    line = arr[i].trim();
    if (line === '') {
      break;
    }
    p = line.indexOf(' ');
    name = line.substring(1, p);
    value = line.substring(p + 2, line.length - 2);
    attrs[name] = value;
  }
  site = a("Lichess", `href=${attrs.Site}`);
  return `${attrs.Event} ${attrs.Date}<br>${site}<br> FEN: ${attrs.FEN}<br> White: ${attrs.WhiteElo} ${attrs.White}<br>Black: ${attrs.BlackElo} ${attrs.Black}<br>${attrs.Result}`;
};

parsePGN = function(pgn) {
  var a0, a1, a2, arr, gap, header;
  header = getHeader(pgn);
  echo(header);
  pgn = removeParenthesis(pgn);
  pgn = removeEval(pgn);
  pgn = pgn.replaceAll('{  }', '');
  pgn = pgn.replaceAll('??', '');
  pgn = pgn.replaceAll('?!', '');
  pgn = pgn.replaceAll('?', '');
  pgn = pgn.replaceAll('0-1', '');
  pgn = pgn.replaceAll('1/2-1/2', '');
  pgn = pgn.replaceAll('1-0', '');
  pgn = pgn.replaceAll('*', '');
  arr = splitMoves(pgn);
  echo('arr', arr);
  a0 = tabell(arr, 0, 80); // klarar 40 drag
  if (arr.length > 80) {
    a1 = tabell(arr, 80, 160);
  } else {
    a1 = "";
  }
  a2 = tabell(arr, 160, 240); // klarar 40 till
  echo('a0', a0);
  echo('a1', a1);
  echo('a2', a2);
  gap = td("", 'style="width:10px"');
  return table(tr(td(header, 'colspan="5" style="text-align:left"')) + tr(td(a0) + gap + td(a1) + gap + td(a2)), 'class="outer-table"');
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uXFwiLCJzb3VyY2VzIjpbImNvZmZlZVxcc2tldGNoLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsSUFBQSxDQUFBLEVBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxTQUFBLEVBQUEsU0FBQSxFQUFBLFFBQUEsRUFBQSxNQUFBLEVBQUEsVUFBQSxFQUFBLGlCQUFBLEVBQUEsSUFBQSxFQUFBLFVBQUEsRUFBQSxNQUFBLEVBQUEsTUFBQSxFQUFBLEtBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUE7RUFBQTs7QUFBQSxJQUFBLEdBQU8sT0FBTyxDQUFDOztBQUVmLElBQUEsR0FBUSxRQUFBLENBQUMsQ0FBRCxFQUFHLFFBQU0sRUFBVCxDQUFBO1NBQWdCLENBQUEsTUFBQSxDQUFBLENBQVMsS0FBVCxDQUFBLENBQUEsQ0FBQSxDQUFrQixDQUFsQixDQUFBLE9BQUE7QUFBaEI7O0FBQ1IsS0FBQSxHQUFRLFFBQUEsQ0FBQyxDQUFELEVBQUcsUUFBTSxFQUFULENBQUE7U0FBZ0IsQ0FBQSxPQUFBLENBQUEsQ0FBVSxLQUFWLENBQUEsR0FBQSxDQUFBLENBQXFCLENBQXJCLENBQUEsUUFBQTtBQUFoQjs7QUFDUixFQUFBLEdBQVEsUUFBQSxDQUFDLENBQUQsRUFBRyxRQUFNLEVBQVQsQ0FBQTtTQUFnQixDQUFBLElBQUEsQ0FBQSxDQUFPLEtBQVAsQ0FBQSxDQUFBLENBQUEsQ0FBZ0IsQ0FBaEIsQ0FBQSxPQUFBO0FBQWhCOztBQUNSLEVBQUEsR0FBUSxRQUFBLENBQUMsQ0FBRCxFQUFHLFFBQU0sRUFBVCxDQUFBO1NBQWdCLENBQUEsSUFBQSxDQUFBLENBQU8sS0FBUCxDQUFBLENBQUEsQ0FBQSxDQUFnQixDQUFoQixDQUFBLEtBQUE7QUFBaEI7O0FBQ1IsRUFBQSxHQUFRLFFBQUEsQ0FBQyxDQUFELEVBQUcsUUFBTSxFQUFULENBQUE7U0FBZ0IsQ0FBQSxJQUFBLENBQUEsQ0FBTyxLQUFQ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Q0FBRyxFQUFBLENBQUcsRUFBSCxDQUFBLEdBQVMsR0FBVCxHQUFlLEVBQUEsQ0FBRyxFQUFILENBQWYsR0FBd0IsR0FBeEIsR0FBOEIsRUFBQSxDQUFHLEVBQUgsQ0FBakMsQ0FBOUQsRUFBd0cscUJBQXhHO0FBMUJVIiwic291cmNlc0NvbnRlbnQiOlsiZWNobyA9IGNvbnNvbGUubG9nXHJcblxyXG5zcGFuICA9IChzLGF0dHJzPVwiXCIpIC0+IFwiPHNwYW4gI3thdHRyc30+I3tzfTwvc3Bhbj5cIlxyXG50YWJsZSA9IChzLGF0dHJzPVwiXCIpIC0+IFwiPHRhYmxlICN7YXR0cnN9PlxcbiN7c308L3RhYmxlPlwiXHJcbnRyICAgID0gKHMsYXR0cnM9XCJcIikgLT4gXCI8dHIgI3thdHRyc30+I3tzfTwvdHI+XFxuXCJcclxudGQgICAgPSAocyxhdHRycz1cIlwiKSAtPiBcIjx0ZCAje2F0dHJzfT4je3N9PC90ZD5cIlxyXG50aCAgICA9IChzLGF0dHJzPVwiXCIpIC0+IFwiPHRoICN7YXR0cnN9PiN7c308L3RoPlwiXHJcbmEgICAgID0gKHMsYXR0cnM9XCJcIikgLT4gXCI8YSAje2F0dHJzfT4je3N9PC9hPlwiXHJcbnN0cm9uZz0gKHMpIC0+IFwiPHN0cm9uZz4je3N9PC9zdHJvbmc+XCJcclxuXHJcbmZvcm1hdFBHTiA9IC0+XHJcblx0Y3RybEEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCBcInBnbi1pbnB1dFwiXHJcblx0Y3RybEIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCBcImtuYXBwXCJcclxuXHRjdHJsQyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkIFwib3V0cHV0XCJcclxuXHRjdHJsQS5oaWRkZW4gPSB0cnVlXHJcblx0Y3RybEIuaGlkZGVuID0gdHJ1ZVxyXG5cdGlucHV0ID0gY3RybEEudmFsdWVcclxuXHRjdHJsQy5pbm5lckhUTUwgPSBwYXJzZVBHTiBpbnB1dCBcclxuXHJcbnByZXR0eSA9IChyYXcpIC0+XHJcblx0aWYgXCJ7XCIgbm90IGluIHJhdyB0aGVuIHJldHVybiBbcmF3LnRyaW0oKSwnJywnJ11cclxuXHRhcnIgPSByYXcuc3BsaXQgJyAnXHJcblx0bW92ZSA9IGFyclswXVxyXG5cdGlmIFwiSW5hY2N1cmFjeS5cIiA9PSBhcnJbM10gdGhlbiByZXR1cm4gW21vdmUsICcg4oCiICcsICAgYXJyWzRdXVxyXG5cdGlmIFwiTWlzdGFrZS5cIiAgICA9PSBhcnJbM10gdGhlbiByZXR1cm4gW21vdmUsICcg4oCi4oCiICcsICBhcnJbNF1dXHJcblx0aWYgXCJCbHVuZGVyLlwiICAgID09IGFyclszXSB0aGVuIHJldHVybiBbbW92ZSwgJyDigKLigKLigKIgJywgYXJyWzRdXVxyXG5cdGlmIFwiQ2hlY2ttYXRlXCIgICA9PSBhcnJbM10gdGhlbiByZXR1cm4gW21vdmUsICcg4oCi4oCi4oCiICcsIGFycls3XV1cclxuXHRpZiBcImNoZWNrbWF0ZVwiICAgPT0gYXJyWzVdIHRoZW4gcmV0dXJuIFttb3ZlLCAnIOKAouKAouKAoiAnLCBhcnJbN11dXHJcblx0W21vdmUsJycsJyddXHJcbiMgZWNobyBbXCJkNVwiLFwiXCJdLCBwcmV0dHkgXCJkNSAgXCJcclxuIyBwcmV0dHkgXCJCaDUgIHsgSW5hY2N1cmFjeS4gQnhmMyB3YXMgYmVzdC4gfSAgXCIgPT4gW1wiQmg1XCIsXCLigKIgKEJ4ZjMpXCJdXHJcblxyXG5mZXRjaCA9IChwZ24sIG1vdmUsIG9mZnNldCwgc3RhcnQsIHN0b3BwKSAtPlxyXG5cdGEgPSBvZmZzZXQgKyBtb3ZlLnRvU3RyaW5nKCkubGVuZ3RoXHJcblx0cCA9IHBnbi5pbmRleE9mIHN0YXJ0XHJcblx0cSA9IHBnbi5pbmRleE9mIHN0b3BwXHJcblx0aWYgcCA9PSAtMSB0aGVuIHJldHVybiBbJycsJycsJyddXHJcblx0aWYgcSA9PSAtMSB0aGVuIHEgPSBwZ24ubGVuZ3RoXHJcblx0cmVzdWx0ID0gcHJldHR5IHBnbi5zdWJzdHJpbmcgcCthLHFcclxuXHRlY2hvIHJlc3VsdFxyXG5cdHJlc3VsdFxyXG5cclxuc3BsaXRNb3ZlcyA9IChwZ24pIC0+XHJcblx0YXJyID0gW11cclxuXHRtb3ZlID0gMSBcclxuXHR3aGlsZSB0cnVlXHJcblx0XHR3ID0gZmV0Y2ggcGduLCBtb3ZlLCAyLCBtb3ZlICsgJy4nLCBtb3ZlICsgJy4uLidcclxuXHRcdGlmIHcuam9pbignJykubGVuZ3RoID09IDAgdGhlbiBicmVha1xyXG5cdFx0YXJyLnB1c2ggd1xyXG5cclxuXHRcdGIgPSBmZXRjaCBwZ24sIG1vdmUsIDQsIG1vdmUgKyAnLi4uJywgKG1vdmUrMSkgKyAnLidcclxuXHRcdGlmIGIuam9pbignJykubGVuZ3RoID09IDAgdGhlbiBicmVha1xyXG5cdFx0YXJyLnB1c2ggYlxyXG5cclxuXHRcdG1vdmUrK1xyXG5cdGFyclxyXG5cclxucmVtb3ZlUGFyZW50aGVzaXMgPSAocGduKSAtPlxyXG5cdHJlc3VsdCA9IFwiXCJcclxuXHRsZXZlbCA9IDBcclxuXHRmb3IgY2ggaW4gcGduXHJcblx0XHRpZiBjaCA9PSAnKCcgdGhlbiBsZXZlbCsrXHJcblx0XHRlbHNlIGlmIGNoID09ICcpJyB0aGVuIGxldmVsLS1cclxuXHRcdGVsc2UgaWYgbGV2ZWwgPT0gMCB0aGVuIHJlc3VsdCArPSBjaFxyXG5cdHJlc3VsdFxyXG5cclxucmVtb3ZlRXZhbCA9IChwZ24pIC0+XHJcblx0cmVzdWx0ID0gXCJcIlxyXG5cdGxldmVsID0gMFxyXG5cdGZvciBjaCBpbiBwZ25cclxuXHRcdGlmIGNoPT0nWycgdGhlbiBsZXZlbCA9IGxldmVsICsgMVxyXG5cdFx0ZWxzZSBpZiBjaD09J10nIHRoZW4gbGV2ZWwgPSBsZXZlbCAtIDFcclxuXHRcdGVsc2UgaWYgbGV2ZWwgPT0gMCB0aGVuIHJlc3VsdCArPSBjaFxyXG5cdHJlc3VsdFxyXG5cclxudGFiZWxsID0gKGFycixzdGFydCxzdG9wcCkgLT5cclxuXHRzID0gXCJcIlxyXG5cdG4gPSBhcnIubGVuZ3RoICMgYW50YWwgcGx5XHJcblx0ZWNobyBuLHN0YXJ0LHN0b3BwXHJcblx0aWYgc3RhcnQgPj0gbiB0aGVuIHJldHVybiAnJ1xyXG5cdGZvciBpIGluIFtzdGFydC8yLi4uc3RvcHAvMl1cclxuXHRcdGluZGV4ID0gMippXHJcblx0XHRbYyxiLGFdID0gaWYgaW5kZXggICA8IG4gdGhlbiBhcnJbaW5kZXhdICAgZWxzZSBbJycsJycsJyddXHJcblx0XHRbZCxlLGZdID0gaWYgaW5kZXgrMSA8IG4gdGhlbiBhcnJbaW5kZXgrMV0gZWxzZSBbJycsJycsJyddXHJcblx0XHR0ID0gdHIgdGQoYSkgKyB0ZChiKSArIHRkKGMpICsgdGQoc3Ryb25nKDEraSkpICsgdGQoZCkgKyB0ZChlKSArIHRkKGYpXHJcblx0XHRlY2hvIGksdFxyXG5cdFx0cyArPSB0XHJcblx0dGFibGUgcywgJ2NsYXNzPVwiaW5uZXItdGFibGVcIidcclxuXHJcbmdldEhlYWRlciA9IChwZ24pIC0+XHJcblx0YXJyID0gcGduLnNwbGl0ICdcXG4nXHJcblx0YXR0cnMgPSB7fVxyXG5cdHJlc3VsdCA9IFwiXCJcclxuXHRhdHRycy5FdmVudCA9IFwiXCJcclxuXHRhdHRycy5EYXRlID0gXCJcIlxyXG5cdGF0dHJzLlNpdGUgPSBcIlwiXHJcblx0YXR0cnMuVGltZUNvbnRyb2wgPSBcIlwiXHJcblx0YXR0cnMuRkVOID0gXCJcIlxyXG5cdGF0dHJzLldoaXRlRWxvID0gXCJcIlxyXG5cdGF0dHJzLldoaXRlID0gXCJcIlxyXG5cdGF0dHJzLkJsYWNrRWxvID0gXCJcIlxyXG5cdGF0dHJzLkJsYWNrID0gXCJcIlxyXG5cdGF0dHJzLlJlc3VsdCA9IFwiXCJcclxuXHRmb3IgaSBpbiBbMC4uLmFyci5sZW5ndGhdXHJcblx0XHRsaW5lID0gYXJyW2ldLnRyaW0oKVxyXG5cdFx0aWYgbGluZSA9PSAnJyB0aGVuIGJyZWFrXHJcblx0XHRwID0gbGluZS5pbmRleE9mICcgJ1xyXG5cdFx0bmFtZSA9IGxpbmUuc3Vic3RyaW5nIDEscFxyXG5cdFx0dmFsdWUgPSBsaW5lLnN1YnN0cmluZyBwKzIsbGluZS5sZW5ndGgtMlxyXG5cdFx0YXR0cnNbbmFtZV0gPSB2YWx1ZVxyXG5cclxuXHRzaXRlID0gYSBcIkxpY2hlc3NcIixcImhyZWY9I3thdHRycy5TaXRlfVwiXHJcblx0XCIje2F0dHJzLkV2ZW50fSAje2F0dHJzLkRhdGV9PGJyPiN7c2l0ZX08YnI+IEZFTjogI3thdHRycy5GRU59PGJyPiBXaGl0ZTogI3thdHRycy5XaGl0ZUVsb30gI3thdHRycy5XaGl0ZX08YnI+QmxhY2s6ICN7YXR0cnMuQmxhY2tFbG99ICN7YXR0cnMuQmxhY2t9PGJyPiN7YXR0cnMuUmVzdWx0fVwiXHJcblxyXG5wYXJzZVBHTiA9IChwZ24pIC0+IFxyXG5cdGhlYWRlciA9IGdldEhlYWRlciBwZ25cclxuXHRlY2hvIGhlYWRlclxyXG5cdHBnbiA9IHJlbW92ZVBhcmVudGhlc2lzKHBnbilcclxuXHRwZ24gPSByZW1vdmVFdmFsIHBnblxyXG5cdHBnbiA9IHBnbi5yZXBsYWNlQWxsICd7ICB9JywnJ1xyXG5cdHBnbiA9IHBnbi5yZXBsYWNlQWxsICc/PycsJydcclxuXHRwZ24gPSBwZ24ucmVwbGFjZUFsbCAnPyEnLCcnXHJcblx0cGduID0gcGduLnJlcGxhY2VBbGwgJz8nLCcnXHJcblx0cGduID0gcGduLnJlcGxhY2VBbGwgJzAtMScsJydcclxuXHRwZ24gPSBwZ24ucmVwbGFjZUFsbCAnMS8yLTEvMicsJydcclxuXHRwZ24gPSBwZ24ucmVwbGFjZUFsbCAnMS0wJywnJ1xyXG5cdHBnbiA9IHBnbi5yZXBsYWNlQWxsICcqJywnJ1xyXG5cdGFyciA9IHNwbGl0TW92ZXMgcGduXHJcblx0ZWNobyAnYXJyJyxhcnJcclxuXHJcblx0YTAgPSB0YWJlbGwgYXJyLCAwLDgwICAjIGtsYXJhciA0MCBkcmFnXHJcblx0aWYgYXJyLmxlbmd0aCA+IDgwIHRoZW4gYTEgPSB0YWJlbGwgYXJyLCA4MCwxNjAgZWxzZSBhMSA9IFwiXCJcclxuXHRhMiA9IHRhYmVsbCBhcnIsIDE2MCwyNDAgIyBrbGFyYXIgNDAgdGlsbFxyXG5cclxuXHRlY2hvICdhMCcsYTBcclxuXHRlY2hvICdhMScsYTFcclxuXHRlY2hvICdhMicsYTJcclxuXHJcblx0Z2FwID0gdGQgXCJcIiwgJ3N0eWxlPVwid2lkdGg6MTBweFwiJ1xyXG5cclxuXHR0YWJsZSh0cih0ZChoZWFkZXIsICdjb2xzcGFuPVwiNVwiIHN0eWxlPVwidGV4dC1hbGlnbjpsZWZ0XCInKSkgKyB0cih0ZChhMCkgKyBnYXAgKyB0ZChhMSkgKyBnYXAgKyB0ZChhMikpLCAnY2xhc3M9XCJvdXRlci10YWJsZVwiJykiXX0=
//# sourceURL=c:\github\2025\003-PrettyPGN\coffee\sketch.coffee