<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PGN Formatter</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        textarea { width: 100%; height: 150px; }
        pre { background: #f4f4f4; padding: 10px; }
        td {text-align: center;}
        td:nth-child(1), th:nth-child(1) { min-width: 20px;}
        td:nth-child(2), th:nth-child(2) { min-width: 20px;}
        td:nth-child(3), th:nth-child(3) { min-width: 20px;}
        td:nth-child(5), th:nth-child(5) { min-width: 20px;}
        td:nth-child(6), th:nth-child(6) { min-width: 20px;}
        td:nth-child(7), th:nth-child(7) { min-width: 20px;}
        .outer-table {border: none;}
        .outer-table td {border: none;}
        .inner-table {border-collapse: collapse;}
        .inner-table td {border: 1px solid black;}
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/coffeescript/2.5.1/coffeescript.min.js"></script>
</head>
<body>
    <textarea id="pgn-input" placeholder="Klistra in PGN här...">
        [Event "SrS KM"]
        [Site "https://lichess.org/study/w7W4RA4b/R9oe6utd"]
        [Date "2025-01-21"]
        [White "Christer Nilsson"]
        [Black "Markus Mäkelä"]
        [Result "1-0"]
        [WhiteElo "1631"]
        [BlackElo "1902"]
        [Variant "Standard"]
        [ECO "B50"]
        [Opening "Sicilian Defense: Modern Variations"]
        [Annotator "https://lichess.org/@/ChristerNilsson"]
        [StudyName "2025"]
        [ChapterName "CN 1631 vs Markus Mäkelä 1902 (1-0)"]
        
        1. e4 { [%eval 0.18] } 1... c5 { [%eval 0.25] } 2. Nf3 { [%eval 0.2] } 2... d6 { [%eval 0.22] } 3. h3 { [%eval 0.05] } 3... Nf6 { [%eval 0.16] } 4. Nc3 { [%eval 0.04] } 4... a6 { [%eval 0.25] } 5. a4 { [%eval 0.1] } 5... Nc6 { [%eval 0.21] } 6. Bc4 { [%eval -0.07] } 6... e6 { [%eval 0.0] } 7. Ba2 { [%eval -0.27] } 7... Be7 { [%eval -0.16] } 8. d3 { [%eval -0.16] } 8... O-O { [%eval -0.17] } 9. O-O { [%eval -0.14] } 9... b6 { [%eval -0.07] } 10. Bd2 { [%eval -0.21] } 10... Bb7 { [%eval -0.22] } 11. Re1 { [%eval -0.15] } 11... Ne8 { [%eval 0.04] } 12. Ne2 { [%eval -0.06] } 12... Nc7 { [%eval 0.43] } 13. c4? { [%eval -1.16] } { Mistake. c3 was best. } (13. c3 Ne5 14. Nf4 Nxf3+ 15. Qxf3 g6 16. d4 b5 17. Qg4 c4 18. b3 e5) 13... Bf6 { [%eval -0.98] } 14. Bc3 { [%eval -1.07] } 14... Nb4? { [%eval 0.32] } { Mistake. e5 was best. } (14... e5 15. a5 bxa5 16. Bb1 Ne6 17. Nc1 Be7 18. Bc2 Nb4 19. Nb3 a4 20. Rxa4) 15. Bb1 { [%eval 0.34] } 15... b5 { [%eval 0.27] } 16. Qb3?! { [%eval -0.39] } { Inaccuracy. cxb5 was best. } (16. cxb5) 16... bxa4?! { [%eval 0.66] } { Inaccuracy. bxc4 was best. } (16... bxc4 17. Qxc4 a5 18. Bxf6 Qxf6 19. d4 Rfc8 20. e5 Qd8 21. exd6 Nca6 22. Ra3) 17. Rxa4 { [%eval 0.38] } 17... a5 { [%eval 0.75] } 18. d4 { [%eval 0.37] } 18... Ra6? { [%eval 1.67] } { Mistake. cxd4 was best. } (18... cxd4 19. Nexd4 Nca6 20. Ra3 Nc5 21. Qd1 g6 22. Nh2 h5 23. Nb5 Bxc3 24. bxc3) 19. Bd2? { [%eval 0.34] } { Mistake. dxc5 was best. } (19. dxc5 dxc5 20. Rd1 Qe7 21. Bxf6 gxf6 22. Qe3 Rd8 23. Rxd8+ Qxd8 24. Nc3 Ne8) 19... Bc6 { [%eval 0.66] } 20. Ra1 { [%eval 0.67] } 20... Qa8?! { [%eval 1.35] } { Inaccuracy. g6 was best. } (20... g6 21. Bc3 cxd4 22. Nexd4 e5 23. Bxb4 axb4 24. Rxa6 Nxa6 25. Nxc6 Qb6 26. Qa4) 21. dxc5 { [%eval 1.04] } 21... dxc5 { [%eval 1.32] } 22. Bf4? { [%eval 0.0] } { Mistake. e5 was best. } (22. e5 Be7 23. Ng5 Rd8 24. Qe3 Bxg5 25. Qxg5 h6 26. Qe3 Bxg2 27. Nf4 Bb7) 22... a4 { [%eval 0.0] } 23. Qa3 { [%eval 0.0] } 23... Ra7?? { [%eval 2.08] } { Blunder. Bxe4 was best. } (23... Bxe4 24. Bxc7 Bxb1 25. Raxb1 Nc2 26. Qa2 Nb4 27. Qa3 Nc2) 24. Bd6 { [%eval 2.06] } 24... Rd8 { [%eval 2.05] } 25. Bxc5 { [%eval 1.87] } 25... Nba6? { [%eval 3.97] } { Mistake. Nca6 was best. } (25... Nca6) 26. Bxa7 { [%eval 4.04] } 26... Qxa7 { [%eval 3.43] } 27. Nc3 { [%eval 3.07] } 27... Nc5 { [%eval 3.36] } 28. b4 { [%eval 3.27] } 28... Nb3 { [%eval 3.54] } (28... Nd3 29. Bxd3 Rxd3 30. b5 (30. Rac1 Rxf3 31. gxf3 Bd4 32. Rc2 Ne8 33. b5 Bd7 34. e5)) 29. e5?! { [%eval 2.55] } { Inaccuracy. Qxb3 was best. } (29. Qxb3 axb3 30. Rxa7 Bxc3 31. Rf1 Nb5 32. cxb5 Bxb5 33. Rc7 Bb2 34. Re1 h6) 29... Be7? { [%eval 4.1] } { Mistake. Nxa1 was best. } (29... Nxa1 30. exf6 Bxf3 31. Qxa1 Rd2 32. c5 Bc6 33. Be4 Bxe4 34. Nxe4 Rd3 35. fxg7) 30. Qxb3 { [%eval 3.85] } 1-0
        
            </textarea>
    <button id="knapp" onclick="formatPGN()">Format</button>
    <div id="output"></div>
    <script src="coffee/sketch.js"></script>
</body>
</html>
