<!DOCTYPE html>
<html lang="sv">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>PGN Formatter</title>
	<style>
		body { font-family: Arial, sans-serif; padding: 20px; }
		textarea { width: 100%; height: 150px; }
		pre { background: #f4f4f4; padding: 10px; }

		th, td {height: 1em; } 

		td {text-align: center;}

		table, th, td {
			border: 1px solid black;
			border-collapse: collapse;
		}

		svg {
			position: absolute;
			width: 100%;
			height: 100%;
			transform: translate(-50%, -50%);
		}
		
		line {stroke:black; }
		.xxx {width: 50px;}

		@media print {
			textarea {
				display : none;
			}
			.intro {
				page-break-before: avoid; /* Säkerställer att texten inte bryts */
  			}
			table { 
				page-break-before: always; 
			}
		}
	</style>

</head>

<body>
	<textarea id="pgn-input" placeholder="Klistra in PGN här...">
		[Event "SrS Klass 1"]
		[Site "https://lichess.org/study/w7W4RA4b/WqObVJ3a"]
		[Date "2025-02-12"]
		[White "Christer Nilsson"]
		[Black "Jouko Lehvonen"]
		[Result "1-0"]
		[WhiteElo "1650"]
		[BlackElo "1690"]
		[Variant "Standard"]
		[ECO "C41"]
		[Opening "Philidor Defense"]
		[Annotator "https://lichess.org/@/ChristerNilsson"]
		[StudyName "2025"]
		[ChapterName "Christer Nilsson vs Jouko Lehvonen 1-0"]
		
		1. e4 { [%eval 0.18] } 1... e5 { [%eval 0.21] } 2. Nf3 { [%eval 0.13] } 2... d6 { [%eval 0.48] } 3. h3 { [%eval 0.17] } 3... Nf6 { [%eval 0.16] } 4. Nc3 { [%eval 0.09] } 4... c6 { [%eval 0.42] } 5. d4 { [%eval 0.49] } 5... Qc7 { [%eval 0.54] } 6. b3 { [%eval 0.02] } 6... h6?! { [%eval 0.57] } { Inaccuracy. d5 was best. } (6... d5 7. Nxe5 Bb4 8. Bd2 Bxc3 9. Bxc3 Nxe4 10. Bb2 Nd7 11. Bd3) 7. Bb2 { [%eval 0.57] } 7... Be7 { [%eval 0.6] } 8. Be2 { [%eval 0.37] } 8... O-O { [%eval 0.35] } 9. Qd2 { [%eval 0.26] } 9... Nbd7 { [%eval 0.53] } 10. O-O-O?! { [%eval -0.06] } { Inaccuracy. g4 was best. } (10. g4) 10... Rd8?! { [%eval 0.91] } { Inaccuracy. b5 was best. } (10... b5 11. dxe5) 11. Kb1 { [%eval 0.52] } 11... d5 { [%eval 0.99] } 12. exd5 { [%eval 0.57] } 12... Bb4?? { [%eval 2.74] } { Blunder. e4 was best. } (12... e4 13. Nh2) 13. dxc6 { [%eval 2.71] } 13... bxc6?! { [%eval 3.85] } { Inaccuracy. Qxc6 was best. } (13... Qxc6 14. Qe3 Bxc3 15. Qxc3 Qxc3 16. Bxc3 e4 17. Ne5 Nd5 18. Bd2 Nxe5 19. dxe5) 14. dxe5 { [%eval 3.85] } 14... Nd5? { [%eval 6.22] } { Mistake. Ne4 was best. } (14... Ne4 15. Qe3 Bxc3 16. Bxc3 Nxc3+ 17. Qxc3 Re8 18. Rd6 Nxe5 19. Rhd1 Ng6 20. Rxc6) 15. Nxd5 { [%eval 6.2] } 15... cxd5 { [%eval 5.99] } 16. Qxb4 { [%eval 5.99] } 16... Nb6 { [%eval 6.35] } 17. Qc3 { [%eval 6.25] } 17... Qe7 { [%eval 6.29] } 18. Rhe1 { [%eval 6.18] } 18... a5 { [%eval 6.07] } 19. Qd4 { [%eval 6.12] } 19... Qc7 { [%eval 6.32] } 20. Ba3?! { [%eval 4.73] } { Inaccuracy. e6 was best. } (20. e6 fxe6 21. a4 Rd6 22. Ne5 Ba6 23. Bxa6 Rxa6 24. Qg4 Ra8 25. Rd4 Rc8) 20... a4 { [%eval 4.81] } 21. Bd6 { [%eval 4.68] } 21... Qc6 { [%eval 5.74] } 22. Qc5 { [%eval 5.21] } 22... Qb7 { [%eval 6.41] } 23. Qc7 { [%eval 6.5] } 23... Rd7 { [%eval 6.5] } 24. Qxb7 { [%eval 6.44] } 24... Rxb7 { [%eval 6.23] } 25. Bb5 { [%eval 6.29] } 25... Bd7 { [%eval 6.54] } 26. Bxd7 { [%eval 6.56] } 26... Rxd7 { [%eval 6.65] } 27. Bc5 { [%eval 6.58] } 27... Nc8 { [%eval 7.01] } 28. e6 { [%eval 7.02] } 28... fxe6 { [%eval 6.9] } 29. Rxe6 { [%eval 6.87] } 29... Kh7 { [%eval 7.17] } 30. c4 { [%eval 6.49] } 30... axb3 { [%eval 6.22] } 31. axb3 { [%eval 5.82] } 31... Rb8 { [%eval 6.83] } 32. b4 { [%eval 6.73] } 32... Rdb7 { [%eval 6.89] } 33. Rxd5 { [%eval 6.39] } 33... Rxb4+ { [%eval 6.43] } 34. Bxb4 { [%eval 6.07] } 34... Rxb4+ { [%eval 6.13] } 35. Ka2 { [%eval 6.15] } 35... Rxc4 { [%eval 6.07] } 36. Kb3 { [%eval 5.95] } 36... Rf4 { [%eval 7.07] } 37. Rd7 { [%eval 6.88] } 37... Rf8 { [%eval 6.86] } 38. Ra6 { [%eval 6.65] } 38... Rf5 { [%eval 6.85] } 39. Kc4 { [%eval 6.84] } 39... Rf4+ { [%eval 6.74] } 40. Kd3 { [%eval 6.64] } 40... Rb4 { [%eval 6.66] } 41. Rc6 { [%eval 6.84] } 41... Nb6 { [%eval 6.73] } 42. Rb7 { [%eval 6.3] } 42... Nd5 { [%eval 6.27] } 43. Rf7 { [%eval 5.31] } 43... Nf4+ { [%eval 5.53] } 44. Kc3 { [%eval 5.53] } 44... Nd5+ { [%eval 5.39] } 45. Kd2 { [%eval 5.43] } 45... Nf4 { [%eval 6.3] } 46. Rcc7 { [%eval 6.09] } 46... Ne6 { [%eval 6.09] } 47. Rce7 { [%eval 5.99] } 47... Kg8 { [%eval 6.3] } 48. Ne5 { [%eval 6.06] } 48... Rb6 { [%eval 6.25] } 49. Re8+ { [%eval 6.31] } 49... Kh7 { [%eval 6.24] } 50. Nd7 { [%eval 5.99] } 50... Rd6+ { [%eval 6.25] } 51. Ke1 { [%eval 6.16] } 51... Kg6 { [%eval 6.58] } 52. Ne5+ { [%eval 6.61] } 52... Kh7 { [%eval 6.23] } 53. f4 { [%eval 6.28] } 53... Ra6 { [%eval 6.01] } 54. f5 { [%eval 5.86] } 54... Ng5 { [%eval 6.85] } 55. Rc7 { [%eval 6.6] } 55... Rf6?! { [%eval 10.81] } { Inaccuracy. Ra1+ was best. } (55... Ra1+ 56. Ke2 Ra2+ 57. Ke3 Ra3+ 58. Nd3 Ra6 59. Ree7 h5 60. h4 Kh6 61. hxg5+) 56. g4 { [%eval 9.21] } 56... Ra6? { [%eval #8] } { Checkmate is now unavoidable. h5 was best. } (56... h5 57. Rcc8 Nf7 58. Nxf7 g6 59. Ne5 Ra6 60. fxg6+ Rxg6 61. Rh8+ Kg7 62. Rcg8+) 57. Ng6 { [%eval 9.77] } 57... Rxg6 { [%eval 9.1] } 58. fxg6+ { [%eval 7.7] } 58... Kxg6 { [%eval 7.48] } 59. Ree7 { [%eval 7.02] } 59... Nxh3?! { [%eval 10.74] } { Inaccuracy. Kf6 was best. } (59... Kf6 60. Re3 Kg6 61. h4 Nh7 62. Ree7 Kf6 63. Rf7+ Ke6 64. Rxg7 Nf6 65. Rg6) 60. Rxg7+ { [%eval 10.28] } 60... Kf6 { [%eval #18] } 61. Rcf7+ { [%eval #22] } 61... Ke5 { [%eval #18] } 62. Rf5+ { [%eval #20] } 62... Ke4 { [%eval 11.76] } 63. Re7+ { [%eval 9.7] } 63... Kd4 { [%eval 9.34] } 64. Rh5 { [%eval 8.36] } 64... Ng5? { [%eval #17] } { Checkmate is now unavoidable. Nf4 was best. } (64... Nf4 65. Rxh6 Nd3+ 66. Ke2 Nb4 67. Re8 Kc3 68. g5 Nd5 69. g6 Nf4+ 70. Kf3) 65. Rxg5 { [%eval 29.1] } 1-0
						
	</textarea>
	<div id="output"></div>
	<!-- <button id="knapp" onclick="formatPGN()">Format</button> -->
	<script type="module" src="./coffee/sketch.js"></script>
</body>
</html>
