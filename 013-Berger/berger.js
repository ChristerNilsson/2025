// Generated by CoffeeScript 2.7.0
var echo, expected_score, extrapolate, main, makeKarpidisBerger, parseQuery, performance, performance_rating, prettify, safeGet, savePairing, showBerger, showHelp, showTables, summa,
  indexOf = [].indexOf;

echo = console.log;

summa = function(arr) {
  var item, k, len, res;
  res = 0;
  for (k = 0, len = arr.length; k < len; k++) {
    item = arr[k];
    res += item;
  }
  return res;
};

expected_score = function(ratings, own_rating) {
  var rating;
  return summa((function() {
    var k, len, results1;
    results1 = [];
    for (k = 0, len = ratings.length; k < len; k++) {
      rating = ratings[k];
      results1.push(1 / (1 + 10 ** ((rating - own_rating) / 400)));
    }
    return results1;
  })());
};

performance_rating = function(pp, ratings) {
  var hi, lo, rating;
  lo = 0;
  hi = 4000;
  while (Math.abs(hi - lo) > 0.001) {
    rating = (lo + hi) / 2;
    if (pp > expected_score(ratings, rating)) {
      lo = rating;
    } else {
      hi = rating;
    }
  }
  return rating;
};


// Use two extreme values when calculating 0% or 100%
extrapolate = function(a0, b0, elos) {
  var a, b;
  a = performance_rating(a0, elos);
  b = performance_rating(b0, elos);
  return b + b - a;
};

performance = function(pp, elos) {
  var n;
  n = elos.length;
  if (n === 1) {
    if (pp === 0) {
      return extrapolate(0.50, 0.25, elos);
    }
    if (pp === n) {
      return extrapolate(0.50, 0.75, elos);
    }
  } else {
    if (pp === 0) {
      return extrapolate(1, 0.5, elos);
    }
    if (pp === n) {
      return extrapolate(n - 1, n - 0.5, elos);
    }
  }
  return performance_rating(pp, elos);
};

safeGet = function(params, key) {
  if (params.get(key)) {
    return params.get(key);
  } else {
    return params.get(' ' + key);
  }
};

parseQuery = function() {
  var elo, i, k, l, name, p, params, players, r, ref, results, title;
  params = new URLSearchParams(window.location.search);
  // echo params.toString()
  // echo window.location.search
  title = safeGet(params, "title");
  players = [];
  for (i = k = 1; k <= 20; i = ++k) {
    p = safeGet(params, `p${i}`);
    if (p == null) {
      break;
    }
    elo = parseInt(p.slice(0, 4));
    name = p.slice(4).trim();
    players.push({
      elo,
      name,
      index: i - 1
    });
  }
  results = [];
  for (i = l = 1, ref = players.length - 1; (1 <= ref ? l <= ref : l >= ref); i = 1 <= ref ? ++l : --l) {
    r = safeGet(params, `r${i}`);
    results.push(r != null ? r : "x" * players.length / 2);
  }
  return {players, results, title};
};

savePairing = function(r, A, half, n) {
  var i, k, lst, ref;
  lst = r % 2 === 1 ? [[A[n - 1], A[0]]] : [[A[0], A[n - 1]]];
  for (i = k = 1, ref = half; (1 <= ref ? k < ref : k > ref); i = 1 <= ref ? ++k : --k) {
    lst.push([A[i], A[n - 1 - i]]);
  }
  return lst;
};

makeKarpidisBerger = function(n) {
  var A, half, i, k, ref, rounds;
  if (n % 2 === 1) {
    n += 1;
  }
  half = Math.floor(n / 2);
  A = (function() {
    var results1 = [];
    for (var k = 0; 0 <= n ? k < n : k > n; 0 <= n ? k++ : k--){ results1.push(k); }
    return results1;
  }).apply(this);
  rounds = [];
  for (i = k = 0, ref = n - 1; (0 <= ref ? k < ref : k > ref); i = 0 <= ref ? ++k : --k) {
    rounds.push(savePairing(i, A, half, n));
    A.pop();
    A = A.slice(half).concat(A.slice(0, half));
    A.push(n - 1);
  }
  return rounds;
};

showHelp = function() {
  var help, link, url;
  url = [];
  url.push("http://127.0.0.1:5500/?title=Joukos Sommar 2025");
  url.push("&p1=1698 Onni Aikio");
  url.push("&p2=1558 Helge Bergström");
  url.push("&p3=1549 Jonas Hök");
  url.push("&p4=1679 Lars Johansson");
  url.push("&p5=0000 Per Eriksson");
  url.push("&p6=1653 Christer Nilsson");
  url.push("&p7=1673 Per Hamnström");
  url.push("&p8=1504 Thomas Paulin");
  url.push("&p9=1706 Abbas Razavi");
  url.push("&p10=1579 Jouko Liistamo");
  url.push("&r1=101x1");
  url.push("&r2=0r010");
  url.push("&r3=10011");
  url.push("&r4=10001");
  url.push("&r5=01111");
  url.push("&r7=xx1xx");
  help = document.createElement('div');
  help.className = 'help';
  help.innerHTML = `<p>Exempel:</p><pre>${url.join("\n")}</pre>`;
  document.getElementById('berger').appendChild(help);
  link = document.createElement('a');
  link.href = url.join('');
  link.text = "Exempel";
  return document.getElementById('berger').appendChild(link);
};

showBerger = function(title, players, rounds, results, points) {
  var a, b, cell, h2, header, html, i, k, l, len, m, oppElos, opponent, p, r, ref, ref1, ref2, result, row, tableIndex, tbl, w;
  h2 = document.createElement('h2');
  h2.textContent = title;
  document.getElementById('berger').appendChild(h2);
  tbl = document.createElement('table');
  header = tbl.insertRow();
  header.innerHTML = '<th>#</th><th>Namn</th><th>Elo</th>';
  for (i = k = 0, ref = rounds.length; (0 <= ref ? k < ref : k > ref); i = 0 <= ref ? ++k : --k) {
    cell = document.createElement('th');
    cell.textContent = `${i + 1}`;
    (function(i) {
      return cell.addEventListener('click', function() {
        echo(`Du klickade på rond ${i + 1}`);
        return showTables(rounds[i] || [], players, i, results);
      });
    })(i);
    header.appendChild(cell);
  }
  cell = document.createElement('th');
  cell.textContent = "Poäng";
  header.appendChild(cell);
  cell = document.createElement('th');
  cell.textContent = "PR";
  header.appendChild(cell);
  for (i = l = 0, len = players.length; l < len; i = ++l) {
    p = players[i];
    row = tbl.insertRow();
    row.insertCell().textContent = i + 1;
    cell = row.insertCell();
    cell.textContent = p.name;
    cell.style.textAlign = 'left';
    oppElos = [];
    row.insertCell().textContent = p.elo;
    for (r = m = 0, ref1 = rounds.length; (0 <= ref1 ? m < ref1 : m > ref1); r = 0 <= ref1 ? ++m : --m) {
      cell = row.insertCell();
      tableIndex = rounds[r].findIndex(function([w, b]) {
        return w === i || b === i;
      });
      if (tableIndex === -1) {
        continue;
      }
      //color = if w == i then '' else '*'
      result = ((ref2 = results[r]) != null ? ref2[tableIndex] : void 0) || "";
      result = result.replace("r", "½");
      result = result.replace("x", "");
      [w, b] = rounds[r][tableIndex];
      opponent = w === i ? b : w;
      if (indexOf.call('0½1', result) >= 0 && players[opponent].elo !== 0) {
        oppElos.push(players[opponent].elo);
      }
      if (i === b && result !== "" && result !== "½") {
        result = result === '0' ? '1' : '0';
      }
      if (i === w) {
        a = "right:-7px";
      } else {
        a = "left:-7px";
      }
      html = "";
      html += `<div style='position:absolute; top:-17px;			${a}; font-size:0.7em;'>${opponent + 1}</div>`;
      html += `<div style='position:absolute; top:-4px;	left:-2px; font-size:1.0em;'>${result}</div>`;
      cell.innerHTML = "<div style='position:relative;'>" + html + "</div>";
    }
    row.insertCell().textContent = points[i].toFixed(1);
    row.insertCell().textContent = performance(points[i], oppElos).toFixed(0);
  }
  return document.getElementById('berger').appendChild(tbl);
};

prettify = function(ch) {
  if (ch === '1') {
    return "1 - 0";
  }
  if (ch === '0') {
    return "0 - 1";
  }
  if (ch === 'r') {
    return "½ - ½";
  }
  return "-";
};

showTables = function(rounds, players, selectedRound, results) {
  var b, header, i, k, ref, ref1, ref2, svart, table, td, title, tr, vit, w;
  if (rounds.length === 0) {
    return;
  }
  title = document.createElement('h2');
  title.textContent = `Bordslista för rond ${selectedRound + 1}`;
  document.getElementById('tables').innerHTML = '';
  document.getElementById('tables').appendChild(title);
  table = document.createElement('table');
  header = table.insertRow();
  header.innerHTML = '<th>Bord</th><th>Vit</th><th>Svart</th><th>Resultat</th>';
  for (i = k = 0, ref = rounds.length; (0 <= ref ? k < ref : k > ref); i = 0 <= ref ? ++k : --k) {
    tr = document.createElement('tr');
    [w, b] = rounds[i];
    vit = ((ref1 = players[w]) != null ? ref1.name : void 0) || "";
    svart = ((ref2 = players[b]) != null ? ref2.name : void 0) || "";
    td = document.createElement('td');
    td.textContent = `${i + 1}`;
    tr.appendChild(td);
    td = document.createElement('td');
    td.textContent = vit;
    td.style.textAlign = 'left';
    tr.appendChild(td);
    td = document.createElement('td');
    td.textContent = svart;
    td.style.textAlign = 'left';
    tr.appendChild(td);
    td = document.createElement('td');
    td.textContent = prettify(results[selectedRound][i]);
    td.style.align = 'center';
    tr.appendChild(td);
    table.appendChild(tr);
  }
  return document.getElementById('tables').appendChild(table);
};

main = function() {
  var b, i, j, k, players, points, ref, res, results, round, rounds, title, val, w;
  ({players, results, title} = parseQuery());
  document.title = title;
  if (players.length < 4) {
    showHelp();
    return;
  }
  rounds = makeKarpidisBerger(players.length);
  echo(rounds);
  points = Array(players.length).fill(0);
  for (i = k = 0, ref = results.length; (0 <= ref ? k < ref : k > ref); i = 0 <= ref ? ++k : --k) {
    res = results[i];
    round = rounds[i];
    for (j in round) {
      [w, b] = round[j];
      val = res[j] || '';
      switch (val) {
        case '1':
          points[w] += 1;
          break;
        case '0':
          points[b] += 1;
          break;
        case 'r':
          points[w] += 0.5;
          points[b] += 0.5;
      }
    }
  }
  showBerger(title, players, rounds, results, points);
  return showTables(rounds[0] || [], players, 0, results);
};

main();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmVyZ2VyLmpzIiwic291cmNlUm9vdCI6IlxcIiwic291cmNlcyI6WyJiZXJnZXIuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxJQUFBLElBQUEsRUFBQSxjQUFBLEVBQUEsV0FBQSxFQUFBLElBQUEsRUFBQSxrQkFBQSxFQUFBLFVBQUEsRUFBQSxXQUFBLEVBQUEsa0JBQUEsRUFBQSxRQUFBLEVBQUEsT0FBQSxFQUFBLFdBQUEsRUFBQSxVQUFBLEVBQUEsUUFBQSxFQUFBLFVBQUEsRUFBQSxLQUFBO0VBQUE7O0FBQUEsSUFBQSxHQUFPLE9BQU8sQ0FBQzs7QUFFZixLQUFBLEdBQVEsUUFBQSxDQUFDLEdBQUQsQ0FBQTtBQUNSLE1BQUEsSUFBQSxFQUFBLENBQUEsRUFBQSxHQUFBLEVBQUE7RUFBQyxHQUFBLEdBQU07RUFDTixLQUFBLHFDQUFBOztJQUNDLEdBQUEsSUFBTztFQURSO1NBRUE7QUFKTzs7QUFNUixjQUFBLEdBQWlCLFFBQUEsQ0FBQyxPQUFELEVBQVUsVUFBVixDQUFBO0FBQXdCLE1BQUE7U0FBQyxLQUFBOztBQUFPO0lBQUEsS0FBQSx5Q0FBQTs7b0JBQUEsQ0FBQSxHQUFJLENBQUMsQ0FBQSxHQUFJLEVBQUEsSUFBSSxDQUFDLENBQUMsTUFBQSxHQUFTLFVBQVYsQ0FBQSxHQUF3QixHQUF6QixDQUFUO0lBQUosQ0FBQTs7TUFBUDtBQUF6Qjs7QUFFakIsa0JBQUEsR0FBcUIsUUFBQSxDQUFDLEVBQUQsRUFBSyxPQUFMLENBQUE7QUFDckIsTUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBO0VBQUMsRUFBQSxHQUFLO0VBQ0wsRUFBQSxHQUFLO0FBQ0wsU0FBTSxJQUFJLENBQUMsR0FBTCxDQUFTLEVBQUEsR0FBSyxFQUFkLENBQUEsR0FBb0IsS0FBMUI7SUFDQyxNQUFBLEdBQVMsQ0FBQyxFQUFBLEdBQUssRUFBTixDQUFBLEdBQVk7SUFDckIsSUFBRyxFQUFBLEdBQUssY0FBQSxDQUFlLE9BQWYsRUFBd0IsTUFBeEIsQ0FBUjtN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LENBQVcsS0FBWCxFQUFrQixPQUFsQixFQUEyQixNQUEzQixFQUFtQyxPQUFuQyxFQUE0QyxNQUE1QztTQUNBLFVBQUEsQ0FBVyxNQUFNLENBQUMsQ0FBRCxDQUFOLElBQWEsRUFBeEIsRUFBNEIsT0FBNUIsRUFBcUMsQ0FBckMsRUFBd0MsT0FBeEM7QUF0Qk07O0FBd0JQLElBQUEsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImVjaG8gPSBjb25zb2xlLmxvZ1xyXG5cclxuc3VtbWEgPSAoYXJyKSAtPlxyXG5cdHJlcyA9IDBcclxuXHRmb3IgaXRlbSBpbiBhcnJcclxuXHRcdHJlcyArPSBpdGVtXHJcblx0cmVzXHJcblxyXG5leHBlY3RlZF9zY29yZSA9IChyYXRpbmdzLCBvd25fcmF0aW5nKSAtPiBzdW1tYSAoMSAvICgxICsgMTAqKigocmF0aW5nIC0gb3duX3JhdGluZykgLyA0MDApKSBmb3IgcmF0aW5nIGluIHJhdGluZ3MpXHJcblxyXG5wZXJmb3JtYW5jZV9yYXRpbmcgPSAocHAsIHJhdGluZ3MpIC0+XHJcblx0bG8gPSAwXHJcblx0aGkgPSA0MDAwXHJcblx0d2hpbGUgTWF0aC5hYnMoaGkgLSBsbykgPiAwLjAwMVxyXG5cdFx0cmF0aW5nID0gKGxvICsgaGkpIC8gMlxyXG5cdFx0aWYgcHAgPiBleHBlY3RlZF9zY29yZSByYXRpbmdzLCByYXRpbmdcclxuXHRcdFx0bG8gPSByYXRpbmdcclxuXHRcdGVsc2VcclxuXHRcdFx0aGkgPSByYXRpbmdcclxuXHRyYXRpbmdcclxuIFxyXG4jIFVzZSB0d28gZXh0cmVtZSB2YWx1ZXMgd2hlbiBjYWxjdWxhdGluZyAwJSBvciAxMDAlXHJcbmV4dHJhcG9sYXRlID0gKGEwLCBiMCwgZWxvcykgLT5cclxuXHRhID0gcGVyZm9ybWFuY2VfcmF0aW5nIGEwLGVsb3NcclxuXHRiID0gcGVyZm9ybWFuY2VfcmF0aW5nIGIwLGVsb3NcclxuXHRiICsgYiAtIGFcclxuXHJcbnBlcmZvcm1hbmNlID0gKHBwLGVsb3MpIC0+IFxyXG5cdG4gPSBlbG9zLmxlbmd0aFxyXG5cdGlmIG4gPT0gMVxyXG5cdFx0aWYgcHAgPT0gMCB0aGVuIHJldHVybiBleHRyYXBvbGF0ZSAwLjUwLDAuMjUsZWxvc1xyXG5cdFx0aWYgcHAgPT0gbiB0aGVuIHJldHVybiBleHRyYXBvbGF0ZSAwLjUwLDAuNzUsZWxvc1xyXG5cdGVsc2VcclxuXHRcdGlmIHBwID09IDAgdGhlbiByZXR1cm4gZXh0cmFwb2xhdGUgICAxLCAgMC41LGVsb3NcclxuXHRcdGlmIHBwID09IG4gdGhlbiByZXR1cm4gZXh0cmFwb2xhdGUgbi0xLG4tMC41LGVsb3NcclxuXHRwZXJmb3JtYW5jZV9yYXRpbmcgcHAsZWxvc1xyXG5cclxuc2FmZUdldCA9IChwYXJhbXMsa2V5KSAtPiBpZiBwYXJhbXMuZ2V0IGtleSB0aGVuIHBhcmFtcy5nZXQga2V5IGVsc2UgcGFyYW1zLmdldCAnICcgKyBrZXlcclxuXHJcbnBhcnNlUXVlcnkgPSAtPlxyXG5cdHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMgd2luZG93LmxvY2F0aW9uLnNlYXJjaFxyXG5cclxuXHQjIGVjaG8gcGFyYW1zLnRvU3RyaW5nKClcclxuXHQjIGVjaG8gd2luZG93LmxvY2F0aW9uLnNlYXJjaFxyXG5cclxuXHR0aXRsZSA9IHNhZmVHZXQgcGFyYW1zLCBcInRpdGxlXCJcclxuXHRcclxuXHRwbGF5ZXJzID0gW11cclxuXHRmb3IgaSBpbiBbMS4uMjBdXHJcblx0XHRwID0gc2FmZUdldCBwYXJhbXMsIFwicCN7aX1cIlxyXG5cdFx0aWYgbm90IHA/IHRoZW4gYnJlYWtcclxuXHRcdGVsbyA9IHBhcnNlSW50IHAuc2xpY2UgMCw0XHJcblx0XHRuYW1lID0gcC5zbGljZSg0KS50cmltKClcclxuXHRcdHBsYXllcnMucHVzaCB7ZWxvLCBuYW1lLCBpbmRleDogaSAtIDF9XHJcblxyXG5cdHJlc3VsdHMgPSBbXVxyXG5cdGZvciBpIGluIFsxLi5wbGF5ZXJzLmxlbmd0aCAtIDFdXHJcblx0XHRyID0gc2FmZUdldCBwYXJhbXMsIFwiciN7aX1cIlxyXG5cdFx0cmVzdWx0cy5wdXNoIGlmIHI/IHRoZW4gciBlbHNlIFwieFwiICogcGxheWVycy5sZW5ndGggLyAyXHJcblx0e3BsYXllcnMsIHJlc3VsdHMsIHRpdGxlfVxyXG5cclxuc2F2ZVBhaXJpbmcgPSAociwgQSwgaGFsZiwgbikgLT5cclxuXHRsc3QgPSBpZiByICUgMiA9PSAxIHRoZW4gW1tBW24gLSAxXSwgQVswXV1dIGVsc2UgW1tBWzBdLCBBW24gLSAxXV1dXHJcblx0Zm9yIGkgaW4gWzEuLi5oYWxmXVxyXG5cdFx0bHN0LnB1c2ggW0FbaV0sIEFbbiAtIDEgLSBpXV1cclxuXHRsc3RcclxuXHJcbm1ha2VLYXJwaWRpc0JlcmdlciA9IChuKSAtPlxyXG5cdGlmIG4gJSAyID09IDEgdGhlbiBuICs9IDFcclxuXHRoYWxmID0gbiAvLyAyIFxyXG5cdEEgPSBbMC4uLm5dXHJcblx0cm91bmRzID0gW11cclxuXHRmb3IgaSBpbiBbMC4uLm4tMV1cclxuXHRcdHJvdW5kcy5wdXNoKHNhdmVQYWlyaW5nKGksIEEsIGhhbGYsIG4pKVxyXG5cdFx0QS5wb3AoKVxyXG5cdFx0QSA9IEEuc2xpY2UoaGFsZikuY29uY2F0IEEuc2xpY2UoMCxoYWxmKVxyXG5cdFx0QS5wdXNoKG4tMSlcclxuXHRyb3VuZHNcclxuXHJcbnNob3dIZWxwID0gLT5cclxuXHR1cmwgPSBbXVxyXG5cdHVybC5wdXNoIFwiaHR0cDovLzEyNy4wLjAuMTo1NTAwLz90aXRsZT1Kb3Vrb3MgU29tbWFyIDIwMjVcIlxyXG5cdHVybC5wdXNoIFwiJnAxPTE2OTggT25uaSBBaWtpb1wiXHJcblx0dXJsLnB1c2ggXCImcDI9MTU1OCBIZWxnZSBCZXJnc3Ryw7ZtXCJcclxuXHR1cmwucHVzaCBcIiZwMz0xNTQ5IEpvbmFzIEjDtmtcIlxyXG5cdHVybC5wdXNoIFwiJnA0PTE2NzkgTGFycyBKb2hhbnNzb25cIlxyXG5cdHVybC5wdXNoIFwiJnA1PTAwMDAgUGVyIEVyaWtzc29uXCJcclxuXHR1cmwucHVzaCBcIiZwNj0xNjUzIENocmlzdGVyIE5pbHNzb25cIlxyXG5cdHVybC5wdXNoIFwiJnA3PTE2NzMgUGVyIEhhbW5zdHLDtm1cIlxyXG5cdHVybC5wdXNoIFwiJnA4PTE1MDQgVGhvbWFzIFBhdWxpblwiXHJcblx0dXJsLnB1c2ggXCImcDk9MTcwNiBBYmJhcyBSYXphdmlcIlxyXG5cdHVybC5wdXNoIFwiJnAxMD0xNTc5IEpvdWtvIExpaXN0YW1vXCJcclxuXHR1cmwucHVzaCBcIiZyMT0xMDF4MVwiXHJcblx0dXJsLnB1c2ggXCImcjI9MHIwMTBcIlxyXG5cdHVybC5wdXNoIFwiJnIzPTEwMDExXCJcclxuXHR1cmwucHVzaCBcIiZyND0xMDAwMVwiXHJcblx0dXJsLnB1c2ggXCImcjU9MDExMTFcIlxyXG5cdHVybC5wdXNoIFwiJnI3PXh4MXh4XCJcclxuXHJcblx0aGVscCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgJ2RpdidcclxuXHRoZWxwLmNsYXNzTmFtZSA9ICdoZWxwJ1xyXG5cdGhlbHAuaW5uZXJIVE1MID0gXCI8cD5FeGVtcGVsOjwvcD48cHJlPiN7dXJsLmpvaW4gXCJcXG5cIn08L3ByZT5cIlxyXG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiZXJnZXInKS5hcHBlbmRDaGlsZCBoZWxwXHJcblxyXG5cdGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50ICdhJ1xyXG5cdGxpbmsuaHJlZiA9IHVybC5qb2luICcnXHJcblx0bGluay50ZXh0ID0gXCJFeGVtcGVsXCJcclxuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmVyZ2VyJykuYXBwZW5kQ2hpbGQgbGlua1xyXG5cclxuc2hvd0JlcmdlciA9ICh0aXRsZSwgcGxheWVycywgcm91bmRzLCByZXN1bHRzLCBwb2ludHMpIC0+XHJcblx0aDIgPSAgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCAnaDInXHJcblx0aDIudGV4dENvbnRlbnQgPSB0aXRsZVxyXG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiZXJnZXInKS5hcHBlbmRDaGlsZCBoMlxyXG5cclxuXHR0YmwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50ICd0YWJsZSdcclxuXHRoZWFkZXIgPSB0YmwuaW5zZXJ0Um93KClcclxuXHRoZWFkZXIuaW5uZXJIVE1MID0gJzx0aD4jPC90aD48dGg+TmFtbjwvdGg+PHRoPkVsbzwvdGg+J1xyXG5cdGZvciBpIGluIFswLi4ucm91bmRzLmxlbmd0aF1cclxuXHRcdGNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50ICd0aCdcclxuXHRcdGNlbGwudGV4dENvbnRlbnQgPSBcIiN7aSsxfVwiXHJcblx0XHRkbyAoaSkgLT5cclxuXHRcdFx0Y2VsbC5hZGRFdmVudExpc3RlbmVyICdjbGljaycsIC0+XHJcblx0XHRcdFx0ZWNobyBcIkR1IGtsaWNrYWRlIHDDpSByb25kICN7aSsxfVwiXHJcblx0XHRcdFx0c2hvd1RhYmxlcyByb3VuZHNbaV0gb3IgW10sIHBsYXllcnMsIGksIHJlc3VsdHNcclxuXHJcblx0XHRoZWFkZXIuYXBwZW5kQ2hpbGQgY2VsbFxyXG5cdGNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50ICd0aCdcclxuXHRjZWxsLnRleHRDb250ZW50ID0gXCJQb8OkbmdcIlxyXG5cdGhlYWRlci5hcHBlbmRDaGlsZCBjZWxsXHJcblxyXG5cdGNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50ICd0aCdcclxuXHRjZWxsLnRleHRDb250ZW50ID0gXCJQUlwiXHJcblx0aGVhZGVyLmFwcGVuZENoaWxkIGNlbGxcclxuXHJcblx0Zm9yIHAsIGkgaW4gcGxheWVyc1xyXG5cdFx0cm93ID0gdGJsLmluc2VydFJvdygpXHJcblx0XHRyb3cuaW5zZXJ0Q2VsbCgpLnRleHRDb250ZW50ID0gaSArIDFcclxuXHRcdFxyXG5cdFx0Y2VsbCA9IHJvdy5pbnNlcnRDZWxsKClcclxuXHRcdGNlbGwudGV4dENvbnRlbnQgPSBwLm5hbWVcclxuXHRcdGNlbGwuc3R5bGUudGV4dEFsaWduID0gJ2xlZnQnXHJcblxyXG5cdFx0b3BwRWxvcyA9IFtdXHJcblx0XHRyb3cuaW5zZXJ0Q2VsbCgpLnRleHRDb250ZW50ID0gcC5lbG9cclxuXHRcdGZvciByIGluIFswLi4ucm91bmRzLmxlbmd0aF1cclxuXHRcdFx0Y2VsbCA9IHJvdy5pbnNlcnRDZWxsKClcclxuXHRcdFx0dGFibGVJbmRleCA9IHJvdW5kc1tyXS5maW5kSW5kZXgoKFt3LCBiXSkgLT4gdyA9PSBpIG9yIGIgPT0gaSlcclxuXHRcdFx0aWYgdGFibGVJbmRleCA9PSAtMSB0aGVuIGNvbnRpbnVlXHJcblx0XHRcdCNjb2xvciA9IGlmIHcgPT0gaSB0aGVuICcnIGVsc2UgJyonXHJcblx0XHRcdHJlc3VsdCA9IHJlc3VsdHNbcl0/W3RhYmxlSW5kZXhdIG9yIFwiXCJcclxuXHRcdFx0cmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UgXCJyXCIsIFwiwr1cIlxyXG5cdFx0XHRyZXN1bHQgPSByZXN1bHQucmVwbGFjZSBcInhcIiwgXCJcIlxyXG5cclxuXHRcdFx0W3csIGJdID0gcm91bmRzW3JdW3RhYmxlSW5kZXhdXHJcblx0XHRcdG9wcG9uZW50ID0gaWYgdyA9PSBpIHRoZW4gYiBlbHNlIHdcclxuXHRcdFx0aWYgcmVzdWx0IGluICcwwr0xJyBhbmQgcGxheWVyc1tvcHBvbmVudF0uZWxvICE9IDAgdGhlbiBvcHBFbG9zLnB1c2ggcGxheWVyc1tvcHBvbmVudF0uZWxvXHJcblxyXG5cdFx0XHRpZiBpID09IGIgYW5kIHJlc3VsdCAhPSBcIlwiIGFuZCByZXN1bHQgIT0gXCLCvVwiXHJcblx0XHRcdFx0cmVzdWx0ID0gaWYgcmVzdWx0PT0nMCcgdGhlbiAnMScgZWxzZSAnMCdcclxuXHJcblx0XHRcdGlmIGkgPT0gdyB0aGVuIGEgPSBcInJpZ2h0Oi03cHhcIiBlbHNlIGEgPSBcImxlZnQ6LTdweFwiXHJcblxyXG5cdFx0XHRodG1sID0gXCJcIlxyXG5cdFx0XHRodG1sICs9IFwiPGRpdiBzdHlsZT0ncG9zaXRpb246YWJzb2x1dGU7IHRvcDotMTdweDtcdFx0XHQje2F9OyBmb250LXNpemU6MC43ZW07Jz4je29wcG9uZW50ICsgMX08L2Rpdj5cIlxyXG5cdFx0XHRodG1sICs9IFwiPGRpdiBzdHlsZT0ncG9zaXRpb246YWJzb2x1dGU7IHRvcDotNHB4O1x0bGVmdDotMnB4OyBmb250LXNpemU6MS4wZW07Jz4je3Jlc3VsdH08L2Rpdj5cIlxyXG5cdFx0XHRjZWxsLmlubmVySFRNTCA9IFwiPGRpdiBzdHlsZT0ncG9zaXRpb246cmVsYXRpdmU7Jz5cIiArIGh0bWwgKyBcIjwvZGl2PlwiXHJcblxyXG5cdFx0cm93Lmluc2VydENlbGwoKS50ZXh0Q29udGVudCA9IHBvaW50c1tpXS50b0ZpeGVkIDFcclxuXHRcdHJvdy5pbnNlcnRDZWxsKCkudGV4dENvbnRlbnQgPSBwZXJmb3JtYW5jZShwb2ludHNbaV0sIG9wcEVsb3MpLnRvRml4ZWQgMFxyXG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiZXJnZXInKS5hcHBlbmRDaGlsZCB0YmxcclxuXHJcbnByZXR0aWZ5ID0gKGNoKSAtPlxyXG5cdGlmIGNoPT0nMScgdGhlbiByZXR1cm4gXCIxIC0gMFwiXHJcblx0aWYgY2g9PScwJyB0aGVuIHJldHVybiBcIjAgLSAxXCJcclxuXHRpZiBjaD09J3InIHRoZW4gcmV0dXJuIFwiwr0gLSDCvVwiXHJcblx0XCItXCJcclxuXHJcbnNob3dUYWJsZXMgPSAocm91bmRzLCBwbGF5ZXJzLCBzZWxlY3RlZFJvdW5kLCByZXN1bHRzKSAtPlxyXG5cdGlmIHJvdW5kcy5sZW5ndGggPT0gMCB0aGVuIHJldHVyblxyXG5cclxuXHR0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgJ2gyJ1xyXG5cdHRpdGxlLnRleHRDb250ZW50ID0gXCJCb3Jkc2xpc3RhIGbDtnIgcm9uZCAje3NlbGVjdGVkUm91bmQrMX1cIlxyXG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YWJsZXMnKS5pbm5lckhUTUwgPSAnJ1xyXG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YWJsZXMnKS5hcHBlbmRDaGlsZCB0aXRsZVxyXG5cclxuXHR0YWJsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgJ3RhYmxlJ1xyXG5cclxuXHRoZWFkZXIgPSB0YWJsZS5pbnNlcnRSb3coKVxyXG5cdGhlYWRlci5pbm5lckhUTUwgPSAnPHRoPkJvcmQ8L3RoPjx0aD5WaXQ8L3RoPjx0aD5TdmFydDwvdGg+PHRoPlJlc3VsdGF0PC90aD4nXHJcblxyXG5cdGZvciBpIGluIFswLi4ucm91bmRzLmxlbmd0aF1cclxuXHRcdHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCAndHInXHJcblx0XHRbdywgYl0gPSByb3VuZHNbaV1cclxuXHRcdHZpdCA9IHBsYXllcnNbd10/Lm5hbWUgb3IgXCJcIlxyXG5cdFx0c3ZhcnQgPSBwbGF5ZXJzW2JdPy5uYW1lIG9yIFwiXCJcclxuXHJcblx0XHR0ZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgJ3RkJ1xyXG5cdFx0dGQudGV4dENvbnRlbnQgPSBcIiN7aSArIDF9XCJcclxuXHRcdHRyLmFwcGVuZENoaWxkIHRkXHJcblxyXG5cdFx0dGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50ICd0ZCdcclxuXHRcdHRkLnRleHRDb250ZW50ID0gdml0XHJcblx0XHR0ZC5zdHlsZS50ZXh0QWxpZ24gPSAnbGVmdCdcclxuXHRcdHRyLmFwcGVuZENoaWxkIHRkXHJcblxyXG5cdFx0dGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50ICd0ZCdcclxuXHRcdHRkLnRleHRDb250ZW50ID0gc3ZhcnRcclxuXHRcdHRkLnN0eWxlLnRleHRBbGlnbiA9ICdsZWZ0J1xyXG5cdFx0dHIuYXBwZW5kQ2hpbGQgdGRcclxuXHJcblx0XHR0ZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgJ3RkJ1xyXG5cdFx0dGQudGV4dENvbnRlbnQgPSBwcmV0dGlmeSByZXN1bHRzW3NlbGVjdGVkUm91bmRdW2ldXHJcblx0XHR0ZC5zdHlsZS5hbGlnbiA9ICdjZW50ZXInXHJcblx0XHR0ci5hcHBlbmRDaGlsZCB0ZFxyXG5cclxuXHRcdHRhYmxlLmFwcGVuZENoaWxkIHRyXHJcblx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RhYmxlcycpLmFwcGVuZENoaWxkIHRhYmxlXHJcblxyXG5tYWluID0gLT5cclxuXHR7cGxheWVycywgcmVzdWx0cywgdGl0bGV9ID0gcGFyc2VRdWVyeSgpXHJcblx0ZG9jdW1lbnQudGl0bGUgPSB0aXRsZVxyXG5cclxuXHRpZiBwbGF5ZXJzLmxlbmd0aCA8IDRcclxuXHRcdHNob3dIZWxwKClcclxuXHRcdHJldHVyblxyXG5cdHJvdW5kcyA9IG1ha2VLYXJwaWRpc0JlcmdlcihwbGF5ZXJzLmxlbmd0aClcclxuXHRlY2hvIHJvdW5kc1xyXG5cdHBvaW50cyA9IEFycmF5KHBsYXllcnMubGVuZ3RoKS5maWxsKDApXHJcblxyXG5cdGZvciBpIGluIFswLi4ucmVzdWx0cy5sZW5ndGhdXHJcblx0XHRyZXMgPSByZXN1bHRzW2ldXHJcblx0XHRyb3VuZCA9IHJvdW5kc1tpXVxyXG5cdFx0Zm9yIGosIFt3LCBiXSBvZiByb3VuZFxyXG5cdFx0XHR2YWwgPSByZXNbal0gb3IgJydcclxuXHRcdFx0c3dpdGNoIHZhbFxyXG5cdFx0XHRcdHdoZW4gJzEnIHRoZW4gcG9pbnRzW3ddICs9IDFcclxuXHRcdFx0XHR3aGVuICcwJyB0aGVuIHBvaW50c1tiXSArPSAxXHJcblx0XHRcdFx0d2hlbiAncicgdGhlbiBwb2ludHNbd10gKz0gMC41OyBwb2ludHNbYl0gKz0gMC41XHJcblxyXG5cdHNob3dCZXJnZXIgdGl0bGUsIHBsYXllcnMsIHJvdW5kcywgcmVzdWx0cywgcG9pbnRzXHJcblx0c2hvd1RhYmxlcyByb3VuZHNbMF0gb3IgW10sIHBsYXllcnMsIDAsIHJlc3VsdHNcclxuXHJcbm1haW4oKVxyXG4iXX0=
//# sourceURL=c:\github\2025\013-Berger\berger.coffee