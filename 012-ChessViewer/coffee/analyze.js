// Generated by CoffeeScript 2.7.0
var add, addLink, bests, byt, calcLoss, echo, figurine, getParam, klass, losses, makeTables, moves, params, parseMove, showBest, showLoss, state,
  indexOf = [].indexOf;

echo = console.log;

state = {
  letter: 0,
  losses: 0,
  bests: 0 // visa bättre drag
};

params = null;

moves = [];

losses = [];

bests = [];

byt = function(san, a, b) {
  var i, j, ref;
  for (i = j = 0, ref = a.length; (0 <= ref ? j < ref : j > ref); i = 0 <= ref ? ++j : --j) {
    san = san.replace(a[i], b[i]);
  }
  return san;
};

figurine = function(san) {
  if (state.letter === 1) {
    return byt(san, 'QRBN', 'DTLS');
  } else {
    return byt(san, 'DTLS', 'QRBN');
  }
};

getParam = function(name) {
  var param;
  params = new URLSearchParams(window.location.search);
  param = params.get(name);
  if (indexOf.call("moves losses bests".split(' '), name) >= 0) {
    return (param != null ? param.split("_") : void 0) || [];
  }
  return param;
};

klass = function(loss, move, best) {
  loss = Math.abs(loss);
  if (move === best) {
    return "";
  }
  if (loss < 20) {
    return "";
  }
  if (loss < 50) {
    return "•";
  }
  if (loss < 100) {
    return "••";
  }
  if (loss < 300) {
    return "•••";
  }
  return "••••";
};

parseMove = function(moveStr, chess) {
  var allMoves, j, len, m;
  allMoves = chess.moves({
    verbose: true
  });
  for (j = 0, len = allMoves.length; j < len; j++) {
    m = allMoves[j];
    if (m.san === moveStr) {
      return {
        from: m.from,
        to: m.to
      };
    }
  }
  return null;
};

add = function(tr, text, alignment = 'right') {
  var td;
  td = document.createElement("td");
  td.style = `text-align: ${alignment};`;
  td.textContent = text;
  return tr.appendChild(td);
};

addLink = function(tr, href, text, alignment = 'right') {
  var td;
  td = document.createElement("td");
  td.style = `text-align: ${alignment};`;
  td.innerHTML = `<a href='${href}'>${text}</a>`;
  return tr.appendChild(td);
};

calcLoss = function(i) {
  return losses[i];
};

showLoss = function(i) {
  if (state.losses === 0) {
    return klass(losses[i], moves[i], bests[i]);
  }
  if (state.losses === 1) {
    return losses[i];
  }
};

showBest = function(i) {
  if (state.bests === 1) {
    return bests[i];
  }
  if (bests[i] !== moves[i] && calcLoss(i) >= 20) {
    return bests[i];
  }
  return '';
};

makeTables = function() {
  var href, i, j, k, key, keys, l, len, len1, ref, ref1, results, tbody, tbodypgn, tr, value;
  tbodypgn = document.querySelector("#pgnHeaders tbody");
  tbody = document.querySelector("#chessTable tbody");
  tbodypgn.innerHTML = "";
  tbody.innerHTML = "";
  keys = [];
  ref = [...params.entries()];
  for (j = 0, len = ref.length; j < len; j++) {
    [key, value] = ref[j];
    keys.push(key);
  }
  for (k = 0, len1 = keys.length; k < len1; k++) {
    key = keys[k];
    if (indexOf.call('moves losses bests'.split(' '), key) >= 0) {
      continue;
    }
    tr = document.createElement("tr");
    add(tr, key, 'right');
    if (key === 'Link') {
      addLink(tr, getParam(key), "Link", 'left');
    } else {
      add(tr, getParam(key).replaceAll("_", " "), 'left');
    }
    tbodypgn.appendChild(tr);
  }
  moves = getParam("moves").map(figurine);
  losses = getParam("losses").map(parseFloat);
  bests = getParam("bests").map(figurine);
  results = [];
  for (i = l = 0, ref1 = moves.length; (0 <= ref1 ? l < ref1 : l > ref1); i = 0 <= ref1 ? ++l : --l) {
    if (i % 2 === 0) { // white
      tr = document.createElement("tr");
      add(tr, showBest(i));
      add(tr, showLoss(i));
      href = getParam('Link') + `#${i + 1}`;
      addLink(tr, href, moves[i]);
      add(tr, (Math.floor(i / 2)) + 1, 'center'); // black
    } else {
      href = getParam('Link') + `#${i + 1}`;
      addLink(tr, href, moves[i], 'left');
      add(tr, showLoss(i), 'left');
      add(tr, showBest(i), 'left');
    }
    results.push(tbody.appendChild(tr));
  }
  return results;
};

window.onload = function() {
  params = new URLSearchParams(window.location.search);
  return makeTables();
};

document.addEventListener('keydown', function(event) {
  echo("Tangent nedtryckt:", event.key);
  if (event.key === 'l') {
    state.letter = 1 - state.letter;
    makeTables();
  }
  if (event.key === 'd') {
    state.losses = 1 - state.losses;
    state.bests = 1 - state.bests;
    return makeTables();
  }
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5hbHl6ZS5qcyIsInNvdXJjZVJvb3QiOiIuLlxcIiwic291cmNlcyI6WyJjb2ZmZWVcXGFuYWx5emUuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxJQUFBLEdBQUEsRUFBQSxPQUFBLEVBQUEsS0FBQSxFQUFBLEdBQUEsRUFBQSxRQUFBLEVBQUEsSUFBQSxFQUFBLFFBQUEsRUFBQSxRQUFBLEVBQUEsS0FBQSxFQUFBLE1BQUEsRUFBQSxVQUFBLEVBQUEsS0FBQSxFQUFBLE1BQUEsRUFBQSxTQUFBLEVBQUEsUUFBQSxFQUFBLFFBQUEsRUFBQSxLQUFBO0VBQUE7O0FBQUEsSUFBQSxHQUFPLE9BQU8sQ0FBQzs7QUFFZixLQUFBLEdBQ0U7RUFBQSxNQUFBLEVBQVEsQ0FBUjtFQUNBLE1BQUEsRUFBUSxDQURSO0VBRUEsS0FBQSxFQUFPLENBRlA7QUFBQTs7QUFJRixNQUFBLEdBQVM7O0FBRVQsS0FBQSxHQUFROztBQUNSLE1BQUEsR0FBUzs7QUFDVCxLQUFBLEdBQVE7O0FBRVIsR0FBQSxHQUFNLFFBQUEsQ0FBQyxHQUFELEVBQU0sQ0FBTixFQUFTLENBQVQsQ0FBQTtBQUNOLE1BQUEsQ0FBQSxFQUFBLENBQUEsRUFBQTtFQUFFLEtBQVMsbUZBQVQ7SUFDRSxHQUFBLEdBQU0sR0FBRyxDQUFDLE9BQUosQ0FBWSxDQUFDLENBQUMsQ0FBRCxDQUFiLEVBQWtCLENBQUMsQ0FBQyxDQUFELENBQW5CO0VBRFI7U0FFQTtBQUhJOztBQUtOLFFBQUEsR0FBVyxRQUFBLENBQUMsR0FBRCxDQUFBO0VBQVMsSUFBRyxLQUFLLENBQUMsTUFBTixLQUFnQixDQUFuQjtXQUEwQixHQUFBLENBQUksR0FBSixFQUFTLE1BQVQsRUFBZ0IsTUFBaEIsRUFBMUI7R0FBQSxNQUFBO1dBQXNELEdBQUEsQ0FBSSxHQUFKLEVBQVMsTUFBVCxFQUFnQixNQUFoQixFQUF0RDs7QUFBVDs7QUFFWCxRQUFBLEdBQVcsUUFBQSxDQUFDLElBQUQsQ0FBQTtBQUNYLE1BQUE7RUFB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S0FBSyxDQUFDLFdBQU4sQ0FBa0IsRUFBbEI7RUFiRixDQUFBOztBQTFCVzs7QUF5Q2IsTUFBTSxDQUFDLE1BQVAsR0FBZ0IsUUFBQSxDQUFBLENBQUE7RUFDZCxNQUFBLEdBQVMsSUFBSSxlQUFKLENBQW9CLE1BQU0sQ0FBQyxRQUFRLENBQUMsTUFBcEM7U0FDVCxVQUFBLENBQUE7QUFGYzs7QUFJaEIsUUFBUSxDQUFDLGdCQUFULENBQTBCLFNBQTFCLEVBQXFDLFFBQUEsQ0FBQyxLQUFELENBQUE7RUFDbkMsSUFBQSxDQUFLLG9CQUFMLEVBQTJCLEtBQUssQ0FBQyxHQUFqQztFQUNBLElBQUcsS0FBSyxDQUFDLEdBQU4sS0FBYSxHQUFoQjtJQUNFLEtBQUssQ0FBQyxNQUFOLEdBQWUsQ0FBQSxHQUFJLEtBQUssQ0FBQztJQUN6QixVQUFBLENBQUEsRUFGRjs7RUFJQSxJQUFHLEtBQUssQ0FBQyxHQUFOLEtBQWEsR0FBaEI7SUFDRSxLQUFLLENBQUMsTUFBTixHQUFlLENBQUEsR0FBSSxLQUFLLENBQUM7SUFDekIsS0FBSyxDQUFDLEtBQU4sR0FBYyxDQUFBLEdBQUksS0FBSyxDQUFDO1dBQ3hCLFVBQUEsQ0FBQSxFQUhGOztBQU5tQyxDQUFyQyIsInNvdXJjZXNDb250ZW50IjpbImVjaG8gPSBjb25zb2xlLmxvZ1xyXG5cclxuc3RhdGUgPVxyXG4gIGxldHRlcjogMFxyXG4gIGxvc3NlczogMFxyXG4gIGJlc3RzOiAwICMgdmlzYSBiw6R0dHJlIGRyYWdcclxuXHJcbnBhcmFtcyA9IG51bGxcclxuXHJcbm1vdmVzID0gW11cclxubG9zc2VzID0gW11cclxuYmVzdHMgPSBbXVxyXG5cclxuYnl0ID0gKHNhbiwgYSwgYikgLT5cclxuICBmb3IgaSBpbiBbMC4uLmEubGVuZ3RoXVxyXG4gICAgc2FuID0gc2FuLnJlcGxhY2UgYVtpXSwgYltpXVxyXG4gIHNhblxyXG5cclxuZmlndXJpbmUgPSAoc2FuKSAtPiBpZiBzdGF0ZS5sZXR0ZXIgPT0gMSB0aGVuIGJ5dCBzYW4sICdRUkJOJywnRFRMUycgZWxzZSBieXQgc2FuLCAnRFRMUycsJ1FSQk4nXHJcblxyXG5nZXRQYXJhbSA9IChuYW1lKSAtPlxyXG4gIHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMgd2luZG93LmxvY2F0aW9uLnNlYXJjaFxyXG4gIHBhcmFtID0gcGFyYW1zLmdldChuYW1lKVxyXG4gIGlmIG5hbWUgaW4gXCJtb3ZlcyBsb3NzZXMgYmVzdHNcIi5zcGxpdCAnICcgdGhlbiByZXR1cm4gcGFyYW0/LnNwbGl0KFwiX1wiKSBvciBbXVxyXG4gIHBhcmFtXHJcbiBcclxua2xhc3MgPSAobG9zcyxtb3ZlLGJlc3QpIC0+IFxyXG4gIGxvc3MgPSBNYXRoLmFicyBsb3NzXHJcbiAgaWYgbW92ZSA9PSBiZXN0IHRoZW4gcmV0dXJuIFwiXCJcclxuICBpZiBsb3NzIDwgMjAgIHRoZW4gcmV0dXJuIFwiXCJcclxuICBpZiBsb3NzIDwgNTAgIHRoZW4gcmV0dXJuIFwi4oCiXCJcclxuICBpZiBsb3NzIDwgMTAwICB0aGVuIHJldHVybiBcIuKAouKAolwiXHJcbiAgaWYgbG9zcyA8IDMwMCAgdGhlbiByZXR1cm4gXCLigKLigKLigKJcIlxyXG4gIFwi4oCi4oCi4oCi4oCiXCJcclxuXHJcbnBhcnNlTW92ZSA9IChtb3ZlU3RyLCBjaGVzcykgLT5cclxuICBhbGxNb3ZlcyA9IGNoZXNzLm1vdmVzKHsgdmVyYm9zZTogdHJ1ZSB9KVxyXG4gIGZvciBtIGluIGFsbE1vdmVzIHdoZW4gbS5zYW4gaXMgbW92ZVN0clxyXG4gICAgcmV0dXJuIHsgZnJvbTogbS5mcm9tLCB0bzogbS50byB9XHJcbiAgbnVsbFxyXG5cclxuYWRkID0gKHRyLHRleHQsYWxpZ25tZW50PSdyaWdodCcpIC0+XHJcbiAgdGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50IFwidGRcIlxyXG4gIHRkLnN0eWxlID0gXCJ0ZXh0LWFsaWduOiAje2FsaWdubWVudH07XCJcclxuICB0ZC50ZXh0Q29udGVudCA9IHRleHRcclxuICB0ci5hcHBlbmRDaGlsZCB0ZFxyXG5cclxuYWRkTGluayA9ICh0cixocmVmLHRleHQsYWxpZ25tZW50PSdyaWdodCcpIC0+XHJcbiAgdGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50IFwidGRcIlxyXG4gIHRkLnN0eWxlID0gXCJ0ZXh0LWFsaWduOiAje2FsaWdubWVudH07XCJcclxuICB0ZC5pbm5lckhUTUwgPSBcIjxhIGhyZWY9JyN7aHJlZn0nPiN7dGV4dH08L2E+XCJcclxuICB0ci5hcHBlbmRDaGlsZCB0ZFxyXG5cclxuY2FsY0xvc3MgPSAoaSkgLT4gbG9zc2VzW2ldXHJcblxyXG5zaG93TG9zcyA9IChpKSAtPlxyXG4gIGlmIHN0YXRlLmxvc3NlcyA9PSAwIHRoZW4gcmV0dXJuIGtsYXNzIGxvc3Nlc1tpXSxtb3Zlc1tpXSxiZXN0c1tpXVxyXG4gIGlmIHN0YXRlLmxvc3NlcyA9PSAxIHRoZW4gcmV0dXJuIGxvc3Nlc1tpXVxyXG5cclxuc2hvd0Jlc3QgPSAoaSkgLT5cclxuICBpZiBzdGF0ZS5iZXN0cyA9PSAxIHRoZW4gcmV0dXJuIGJlc3RzW2ldXHJcbiAgaWYgYmVzdHNbaV0gIT0gbW92ZXNbaV0gYW5kIGNhbGNMb3NzKGkpID49IDIwIHRoZW4gcmV0dXJuIGJlc3RzW2ldXHJcbiAgcmV0dXJuICcnXHJcblxyXG5tYWtlVGFibGVzID0gLT5cclxuXHJcbiAgdGJvZHlwZ24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BnbkhlYWRlcnMgdGJvZHlcIilcclxuICB0Ym9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2hlc3NUYWJsZSB0Ym9keVwiKVxyXG5cclxuICB0Ym9keXBnbi5pbm5lckhUTUwgPSBcIlwiXHJcbiAgdGJvZHkuaW5uZXJIVE1MID0gXCJcIlxyXG5cclxuICBrZXlzID0gW11cclxuICBmb3IgW2tleSwgdmFsdWVdIGluIFsuLi5wYXJhbXMuZW50cmllcygpXVxyXG4gICAga2V5cy5wdXNoIGtleSBcclxuXHJcbiAgZm9yIGtleSBpbiBrZXlzXHJcbiAgICBpZiBrZXkgaW4gJ21vdmVzIGxvc3NlcyBiZXN0cycuc3BsaXQgJyAnIHRoZW4gY29udGludWVcclxuICAgIHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCBcInRyXCJcclxuICAgIGFkZCB0ciwga2V5LCAncmlnaHQnXHJcbiAgICBpZiBrZXkgPT0gJ0xpbmsnXHJcbiAgICAgIGFkZExpbmsgdHIsIGdldFBhcmFtKGtleSksIFwiTGlua1wiLCAnbGVmdCdcclxuICAgIGVsc2VcclxuICAgICAgYWRkIHRyLCBnZXRQYXJhbShrZXkpLnJlcGxhY2VBbGwoXCJfXCIsXCIgXCIpLCAnbGVmdCdcclxuICAgIHRib2R5cGduLmFwcGVuZENoaWxkIHRyXHJcblxyXG4gIG1vdmVzID0gZ2V0UGFyYW0oXCJtb3Zlc1wiKS5tYXAgZmlndXJpbmVcclxuICBsb3NzZXMgPSBnZXRQYXJhbShcImxvc3Nlc1wiKS5tYXAgcGFyc2VGbG9hdFxyXG4gIGJlc3RzID0gZ2V0UGFyYW0oXCJiZXN0c1wiKS5tYXAgZmlndXJpbmVcclxuXHJcbiAgZm9yIGkgaW4gWzAuLi5tb3Zlcy5sZW5ndGhdXHJcbiAgICBpZiBpICUgMiA9PSAwICMgd2hpdGVcclxuICAgICAgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50IFwidHJcIlxyXG4gICAgICBhZGQgdHIsIHNob3dCZXN0IGlcclxuICAgICAgYWRkIHRyLCBzaG93TG9zcyBpXHJcbiAgICAgIGhyZWYgPSBnZXRQYXJhbSgnTGluaycpICsgXCIjI3tpKzF9XCJcclxuICAgICAgYWRkTGluayB0ciwgaHJlZiwgbW92ZXNbaV1cclxuICAgICAgYWRkIHRyLCAoaSAvLyAyKSArIDEsICdjZW50ZXInXHJcbiAgICBlbHNlICMgYmxhY2tcclxuICAgICAgaHJlZiA9IGdldFBhcmFtKCdMaW5rJykgKyBcIiMje2krMX1cIlxyXG4gICAgICBhZGRMaW5rIHRyLCBocmVmLCBtb3Zlc1tpXSwgJ2xlZnQnXHJcbiAgICAgIGFkZCB0ciwgc2hvd0xvc3MoaSksICdsZWZ0J1xyXG4gICAgICBhZGQgdHIsIHNob3dCZXN0KGkpLCAnbGVmdCdcclxuICAgIHRib2R5LmFwcGVuZENoaWxkIHRyXHJcblxyXG53aW5kb3cub25sb2FkID0gLT5cclxuICBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpXHJcbiAgbWFrZVRhYmxlcygpXHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyICdrZXlkb3duJywgKGV2ZW50KSAtPlxyXG4gIGVjaG8gXCJUYW5nZW50IG5lZHRyeWNrdDpcIiwgZXZlbnQua2V5XHJcbiAgaWYgZXZlbnQua2V5ID09ICdsJ1xyXG4gICAgc3RhdGUubGV0dGVyID0gMSAtIHN0YXRlLmxldHRlclxyXG4gICAgbWFrZVRhYmxlcygpXHJcblxyXG4gIGlmIGV2ZW50LmtleSA9PSAnZCdcclxuICAgIHN0YXRlLmxvc3NlcyA9IDEgLSBzdGF0ZS5sb3NzZXNcclxuICAgIHN0YXRlLmJlc3RzID0gMSAtIHN0YXRlLmJlc3RzXHJcbiAgICBtYWtlVGFibGVzKClcclxuIl19
//# sourceURL=c:\github\2025\012-ChessViewer\coffee\analyze.coffee