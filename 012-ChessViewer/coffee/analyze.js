// Generated by CoffeeScript 2.7.0
var add, addLink, best, byt, calcLoss, echo, evals, figurine, getParam, klass, makeTables, moves, params, parseMove, showBest, showLoss, state,
  indexOf = [].indexOf;

echo = console.log;

state = {
  letter: 0,
  loss: 0,
  best: 0 // visa bättre drag
};

params = null;

moves = [];

evals = [];

best = [];

byt = function(san, a, b) {
  var i, j, ref;
  for (i = j = 0, ref = a.length; (0 <= ref ? j < ref : j > ref); i = 0 <= ref ? ++j : --j) {
    san = san.replace(a[i], b[i]);
  }
  return san;
};

figurine = function(san) {
  if (state.letter === 1) {
    return byt(san, 'QRBN', 'DTLS');
  } else {
    return byt(san, 'DTLS', 'QRBN');
  }
};

getParam = function(name) {
  var param;
  params = new URLSearchParams(window.location.search);
  param = params.get(name);
  if (indexOf.call("move eval best".split(' '), name) >= 0) {
    return (param != null ? param.split("_") : void 0) || [];
  }
  return param;
};

klass = function(value) {
  value = Math.abs(value);
  if (value < 20) {
    return "";
  }
  if (value < 50) {
    return "•";
  }
  if (value < 100) {
    return "••";
  }
  if (value < 300) {
    return "•••";
  }
  return "••••";
};

parseMove = function(moveStr, chess) {
  var allMoves, j, len, m;
  allMoves = chess.moves({
    verbose: true
  });
  for (j = 0, len = allMoves.length; j < len; j++) {
    m = allMoves[j];
    if (m.san === moveStr) {
      return {
        from: m.from,
        to: m.to
      };
    }
  }
  return null;
};

add = function(tr, text, alignment = 'right') {
  var td;
  td = document.createElement("td");
  td.style = `text-align: ${alignment};`;
  td.textContent = text;
  return tr.appendChild(td);
};

addLink = function(tr, href, text, alignment = 'right') {
  var td;
  td = document.createElement("td");
  td.style = `text-align: ${alignment};`;
  td.innerHTML = `<a href='${href}'>${text}</a>`;
  return tr.appendChild(td);
};

calcLoss = function(i) {
  return evals[i];
};

showLoss = function(i) {
  if (state.loss === 0) {
    return klass(evals[i]);
  }
  if (state.loss === 1) {
    return evals[i];
  }
};

showBest = function(i) {
  if (state.best === 1) {
    return best[i];
  }
  if (best[i] !== moves[i] && calcLoss(i) >= 20) {
    return best[i];
  }
  return '';
};

makeTables = function() {
  var href, i, j, k, key, keys, l, len, len1, ref, ref1, results, tbody, tbodypgn, tr, value;
  tbodypgn = document.querySelector("#pgnHeaders tbody");
  tbody = document.querySelector("#chessTable tbody");
  tbodypgn.innerHTML = "";
  tbody.innerHTML = "";
  keys = [];
  ref = [...params.entries()];
  for (j = 0, len = ref.length; j < len; j++) {
    [key, value] = ref[j];
    keys.push(key);
  }
  for (k = 0, len1 = keys.length; k < len1; k++) {
    key = keys[k];
    if (indexOf.call('move eval best'.split(' '), key) >= 0) {
      continue;
    }
    tr = document.createElement("tr");
    add(tr, key, 'right');
    if (key === 'Link') {
      addLink(tr, getParam(key), "Link", 'left');
    } else {
      add(tr, getParam(key).replaceAll("_", " "), 'left');
    }
    tbodypgn.appendChild(tr);
  }
  moves = getParam("move").map(figurine);
  evals = getParam("eval").map(parseFloat);
  best = getParam("best").map(figurine);
  echo(moves);
  echo(evals);
  echo(best);
// Fyll i tabellen
  results = [];
  for (i = l = 0, ref1 = moves.length; l < ref1; i = l += 2) {
    tr = document.createElement("tr");
    //if i==0 then continue
    add(tr, showBest(i));
    add(tr, showLoss(i));
    href = getParam('Link') + `#${i + 1}`;
    addLink(tr, href, moves[i]);
    add(tr, (Math.floor(i / 2)) + 1, 'center');
    if (i + 2 < moves.length) {
      href = getParam('Link') + `#${i + 2}`;
      addLink(tr, href, moves[i + 1], 'left');
      add(tr, showLoss(i + 1), 'left');
      add(tr, showBest(i + 1), 'left');
    }
    results.push(tbody.appendChild(tr));
  }
  return results;
};

window.onload = function() {
  params = new URLSearchParams(window.location.search);
  return makeTables();
};

document.addEventListener('keydown', function(event) {
  echo("Tangent nedtryckt:", event.key);
  if (event.key === 'l') {
    state.letter = 1 - state.letter;
    makeTables();
  }
  if (event.key === 'd') {
    state.loss = 1 - state.loss;
    state.best = 1 - state.best;
    return makeTables();
  }
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5hbHl6ZS5qcyIsInNvdXJjZVJvb3QiOiIuLlxcIiwic291cmNlcyI6WyJjb2ZmZWVcXGFuYWx5emUuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxJQUFBLEdBQUEsRUFBQSxPQUFBLEVBQUEsSUFBQSxFQUFBLEdBQUEsRUFBQSxRQUFBLEVBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxRQUFBLEVBQUEsUUFBQSxFQUFBLEtBQUEsRUFBQSxVQUFBLEVBQUEsS0FBQSxFQUFBLE1BQUEsRUFBQSxTQUFBLEVBQUEsUUFBQSxFQUFBLFFBQUEsRUFBQSxLQUFBO0VBQUE7O0FBQUEsSUFBQSxHQUFPLE9BQU8sQ0FBQzs7QUFFZixLQUFBLEdBQ0U7RUFBQSxNQUFBLEVBQVEsQ0FBUjtFQUNBLElBQUEsRUFBTSxDQUROO0VBRUEsSUFBQSxFQUFNLENBRk47QUFBQTs7QUFJRixNQUFBLEdBQVM7O0FBRVQsS0FBQSxHQUFROztBQUNSLEtBQUEsR0FBUTs7QUFDUixJQUFBLEdBQU87O0FBRVAsR0FBQSxHQUFNLFFBQUEsQ0FBQyxHQUFELEVBQU0sQ0FBTixFQUFTLENBQVQsQ0FBQTtBQUNOLE1BQUEsQ0FBQSxFQUFBLENBQUEsRUFBQTtFQUFFLEtBQVMsbUZBQVQ7SUFDRSxHQUFBLEdBQU0sR0FBRyxDQUFDLE9BQUosQ0FBWSxDQUFDLENBQUMsQ0FBRCxDQUFiLEVBQWtCLENBQUMsQ0FBQyxDQUFELENBQW5CO0VBRFI7U0FFQTtBQUhJOztBQUtOLFFBQUEsR0FBVyxRQUFBLENBQUMsR0FBRCxDQUFBO0VBQVMsSUFBRyxLQUFLLENBQUMsTUFBTixLQUFnQixDQUFuQjtXQUEwQixHQUFBLENBQUksR0FBSixFQUFTLE1BQVQsRUFBZ0IsTUFBaEIsRUFBMUI7R0FBQSxNQUFBO1dBQXNELEdBQUEsQ0FBSSxHQUFKLEVBQVMsTUFBVCxFQUFnQixNQUFoQixFQUF0RDs7QUFBVDs7QUFFWCxRQUFBLEdBQVcsUUFBQSxDQUFDLElBQUQsQ0FBQTtBQUNYLE1BQUE7RUFB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LEVBQWxCO0VBakJGLENBQUE7O0FBL0JXOztBQWtEYixNQUFNLENBQUMsTUFBUCxHQUFnQixRQUFBLENBQUEsQ0FBQTtFQUNkLE1BQUEsR0FBUyxJQUFJLGVBQUosQ0FBb0IsTUFBTSxDQUFDLFFBQVEsQ0FBQyxNQUFwQztTQUNULFVBQUEsQ0FBQTtBQUZjOztBQUloQixRQUFRLENBQUMsZ0JBQVQsQ0FBMEIsU0FBMUIsRUFBcUMsUUFBQSxDQUFDLEtBQUQsQ0FBQTtFQUNuQyxJQUFBLENBQUssb0JBQUwsRUFBMkIsS0FBSyxDQUFDLEdBQWpDO0VBQ0EsSUFBRyxLQUFLLENBQUMsR0FBTixLQUFhLEdBQWhCO0lBQ0UsS0FBSyxDQUFDLE1BQU4sR0FBZSxDQUFBLEdBQUksS0FBSyxDQUFDO0lBQ3pCLFVBQUEsQ0FBQSxFQUZGOztFQUlBLElBQUcsS0FBSyxDQUFDLEdBQU4sS0FBYSxHQUFoQjtJQUNFLEtBQUssQ0FBQyxJQUFOLEdBQWEsQ0FBQSxHQUFJLEtBQUssQ0FBQztJQUN2QixLQUFLLENBQUMsSUFBTixHQUFhLENBQUEsR0FBSSxLQUFLLENBQUM7V0FDdkIsVUFBQSxDQUFBLEVBSEY7O0FBTm1DLENBQXJDIiwic291cmNlc0NvbnRlbnQiOlsiZWNobyA9IGNvbnNvbGUubG9nXHJcblxyXG5zdGF0ZSA9XHJcbiAgbGV0dGVyOiAwXHJcbiAgbG9zczogMFxyXG4gIGJlc3Q6IDAgIyB2aXNhIGLDpHR0cmUgZHJhZ1xyXG5cclxucGFyYW1zID0gbnVsbFxyXG5cclxubW92ZXMgPSBbXVxyXG5ldmFscyA9IFtdXHJcbmJlc3QgPSBbXVxyXG5cclxuYnl0ID0gKHNhbiwgYSwgYikgLT5cclxuICBmb3IgaSBpbiBbMC4uLmEubGVuZ3RoXVxyXG4gICAgc2FuID0gc2FuLnJlcGxhY2UgYVtpXSwgYltpXVxyXG4gIHNhblxyXG5cclxuZmlndXJpbmUgPSAoc2FuKSAtPiBpZiBzdGF0ZS5sZXR0ZXIgPT0gMSB0aGVuIGJ5dCBzYW4sICdRUkJOJywnRFRMUycgZWxzZSBieXQgc2FuLCAnRFRMUycsJ1FSQk4nXHJcblxyXG5nZXRQYXJhbSA9IChuYW1lKSAtPlxyXG4gIHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMgd2luZG93LmxvY2F0aW9uLnNlYXJjaFxyXG4gIHBhcmFtID0gcGFyYW1zLmdldChuYW1lKVxyXG4gIGlmIG5hbWUgaW4gXCJtb3ZlIGV2YWwgYmVzdFwiLnNwbGl0ICcgJyB0aGVuIHJldHVybiBwYXJhbT8uc3BsaXQoXCJfXCIpIG9yIFtdXHJcbiAgcGFyYW1cclxuIFxyXG5rbGFzcyA9ICh2YWx1ZSkgLT4gXHJcbiAgdmFsdWUgPSBNYXRoLmFicyB2YWx1ZVxyXG4gIGlmIHZhbHVlIDwgMjAgIHRoZW4gcmV0dXJuIFwiXCJcclxuICBpZiB2YWx1ZSA8IDUwICB0aGVuIHJldHVybiBcIuKAolwiXHJcbiAgaWYgdmFsdWUgPCAxMDAgIHRoZW4gcmV0dXJuIFwi4oCi4oCiXCJcclxuICBpZiB2YWx1ZSA8IDMwMCAgdGhlbiByZXR1cm4gXCLigKLigKLigKJcIlxyXG4gIFwi4oCi4oCi4oCi4oCiXCJcclxuXHJcbnBhcnNlTW92ZSA9IChtb3ZlU3RyLCBjaGVzcykgLT5cclxuICBhbGxNb3ZlcyA9IGNoZXNzLm1vdmVzKHsgdmVyYm9zZTogdHJ1ZSB9KVxyXG4gIGZvciBtIGluIGFsbE1vdmVzIHdoZW4gbS5zYW4gaXMgbW92ZVN0clxyXG4gICAgcmV0dXJuIHsgZnJvbTogbS5mcm9tLCB0bzogbS50byB9XHJcbiAgbnVsbFxyXG5cclxuYWRkID0gKHRyLHRleHQsYWxpZ25tZW50PSdyaWdodCcpIC0+XHJcbiAgdGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50IFwidGRcIlxyXG4gIHRkLnN0eWxlID0gXCJ0ZXh0LWFsaWduOiAje2FsaWdubWVudH07XCJcclxuICB0ZC50ZXh0Q29udGVudCA9IHRleHRcclxuICB0ci5hcHBlbmRDaGlsZCB0ZFxyXG5cclxuYWRkTGluayA9ICh0cixocmVmLHRleHQsYWxpZ25tZW50PSdyaWdodCcpIC0+XHJcbiAgdGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50IFwidGRcIlxyXG4gIHRkLnN0eWxlID0gXCJ0ZXh0LWFsaWduOiAje2FsaWdubWVudH07XCJcclxuICB0ZC5pbm5lckhUTUwgPSBcIjxhIGhyZWY9JyN7aHJlZn0nPiN7dGV4dH08L2E+XCJcclxuICB0ci5hcHBlbmRDaGlsZCB0ZFxyXG5cclxuY2FsY0xvc3MgPSAoaSkgLT4gZXZhbHNbaV1cclxuXHJcbnNob3dMb3NzID0gKGkpIC0+XHJcbiAgaWYgc3RhdGUubG9zcyA9PSAwIHRoZW4gcmV0dXJuIGtsYXNzIGV2YWxzW2ldXHJcbiAgaWYgc3RhdGUubG9zcyA9PSAxIHRoZW4gcmV0dXJuIGV2YWxzW2ldXHJcblxyXG5zaG93QmVzdCA9IChpKSAtPlxyXG4gIGlmIHN0YXRlLmJlc3QgPT0gMSB0aGVuIHJldHVybiBiZXN0W2ldXHJcbiAgaWYgYmVzdFtpXSAhPSBtb3Zlc1tpXSBhbmQgY2FsY0xvc3MoaSkgPj0gMjAgdGhlbiByZXR1cm4gYmVzdFtpXVxyXG4gIHJldHVybiAnJ1xyXG5cclxubWFrZVRhYmxlcyA9IC0+XHJcblxyXG4gIHRib2R5cGduID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwZ25IZWFkZXJzIHRib2R5XCIpXHJcbiAgdGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NoZXNzVGFibGUgdGJvZHlcIilcclxuXHJcbiAgdGJvZHlwZ24uaW5uZXJIVE1MID0gXCJcIlxyXG4gIHRib2R5LmlubmVySFRNTCA9IFwiXCJcclxuXHJcbiAga2V5cyA9IFtdXHJcbiAgZm9yIFtrZXksIHZhbHVlXSBpbiBbLi4ucGFyYW1zLmVudHJpZXMoKV1cclxuICAgIGtleXMucHVzaCBrZXkgXHJcblxyXG4gIGZvciBrZXkgaW4ga2V5c1xyXG4gICAgaWYga2V5IGluICdtb3ZlIGV2YWwgYmVzdCcuc3BsaXQgJyAnIHRoZW4gY29udGludWVcclxuICAgIHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCBcInRyXCJcclxuICAgIGFkZCB0ciwga2V5LCAncmlnaHQnXHJcbiAgICBpZiBrZXkgPT0gJ0xpbmsnXHJcbiAgICAgIGFkZExpbmsgdHIsIGdldFBhcmFtKGtleSksIFwiTGlua1wiLCAnbGVmdCdcclxuICAgIGVsc2VcclxuICAgICAgYWRkIHRyLCBnZXRQYXJhbShrZXkpLnJlcGxhY2VBbGwoXCJfXCIsXCIgXCIpLCAnbGVmdCdcclxuICAgIHRib2R5cGduLmFwcGVuZENoaWxkIHRyXHJcblxyXG4gIG1vdmVzID0gZ2V0UGFyYW0oXCJtb3ZlXCIpLm1hcCBmaWd1cmluZVxyXG4gIGV2YWxzID0gZ2V0UGFyYW0oXCJldmFsXCIpLm1hcCBwYXJzZUZsb2F0XHJcbiAgYmVzdCA9IGdldFBhcmFtKFwiYmVzdFwiKS5tYXAgZmlndXJpbmVcclxuXHJcbiAgZWNobyBtb3Zlc1xyXG4gIGVjaG8gZXZhbHNcclxuICBlY2hvIGJlc3RcclxuXHJcbiAgIyBGeWxsIGkgdGFiZWxsZW5cclxuICBmb3IgaSBpbiBbMC4uLm1vdmVzLmxlbmd0aF0gYnkgMlxyXG4gICAgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50IFwidHJcIlxyXG4gICAgI2lmIGk9PTAgdGhlbiBjb250aW51ZVxyXG4gICAgYWRkIHRyLCBzaG93QmVzdCBpXHJcbiAgICBhZGQgdHIsIHNob3dMb3NzIGlcclxuICAgIGhyZWYgPSBnZXRQYXJhbSgnTGluaycpICsgXCIjI3tpKzF9XCJcclxuICAgIGFkZExpbmsgdHIsIGhyZWYsIG1vdmVzW2ldXHJcblxyXG4gICAgYWRkIHRyLCAoaSAvLyAyKSArIDEsICdjZW50ZXInXHJcblxyXG4gICAgaWYgaSsyIDwgbW92ZXMubGVuZ3RoXHJcblxyXG4gICAgICBocmVmID0gZ2V0UGFyYW0oJ0xpbmsnKSArIFwiIyN7aSsyfVwiXHJcbiAgICAgIGFkZExpbmsgdHIsIGhyZWYsIG1vdmVzW2krMV0sICdsZWZ0J1xyXG4gICAgICBhZGQgdHIsIHNob3dMb3NzKGkrMSksICdsZWZ0J1xyXG4gICAgICBhZGQgdHIsIHNob3dCZXN0KGkrMSksICdsZWZ0J1xyXG5cclxuICAgIHRib2R5LmFwcGVuZENoaWxkIHRyXHJcblxyXG53aW5kb3cub25sb2FkID0gLT5cclxuICBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpXHJcbiAgbWFrZVRhYmxlcygpXHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyICdrZXlkb3duJywgKGV2ZW50KSAtPlxyXG4gIGVjaG8gXCJUYW5nZW50IG5lZHRyeWNrdDpcIiwgZXZlbnQua2V5XHJcbiAgaWYgZXZlbnQua2V5ID09ICdsJ1xyXG4gICAgc3RhdGUubGV0dGVyID0gMSAtIHN0YXRlLmxldHRlclxyXG4gICAgbWFrZVRhYmxlcygpXHJcblxyXG4gIGlmIGV2ZW50LmtleSA9PSAnZCdcclxuICAgIHN0YXRlLmxvc3MgPSAxIC0gc3RhdGUubG9zc1xyXG4gICAgc3RhdGUuYmVzdCA9IDEgLSBzdGF0ZS5iZXN0XHJcbiAgICBtYWtlVGFibGVzKClcclxuIl19
//# sourceURL=c:\github\2025\012-ChessViewer\coffee\analyze.coffee